# --// Topic 1: The Linux Community and a Career in Open Source

#-- 1.1 Linux Evolution and Popular Operating Systems

# --VERSION DISTRO
root@debianvm11:/home/alain# lsb_release -a
No LSB modules are available.
Distributor ID: Debian
Description:    Debian GNU/Linux 11 (bullseye)
Release:        11
Codename:       bullseye


# -- 1.2 Major Open Source Applications -- 1 of 1 -- page 14


# --SEARCH FOR A PACKAGE CALLED 'FIGLET'

root@debianvm11:/home/alain# apt-cache search figlet
figlet - Make large character ASCII banners out of ordinary text
irssi-scripts - collection of scripts for irssi
php-text-figlet - Engine for use FIGlet fonts to rendering text
presentty - Console-based presentation software
python3-pyfiglet - Python 3 port of the FIGlet specification
ruby-text - Collection of text algorithms for Ruby
toilet - display large colourful characters in text mode
toilet-fonts - collection of TOIlet fonts

# --INSTALL PACKAGE 'FIGLET'

root@debianvm11:/home/alain# sudo apt-get install figlet
sudo: unable to resolve host debianvm11: Name or service not known
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following NEW packages will be installed:
  figlet
0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.



root@debianvm11:/home/alain# figlet Hello Alain
 _   _      _ _            _    _       _
| | | | ___| | | ___      / \  | | __ _(_)_ __
| |_| |/ _ \ | |/ _ \    / _ \ | |/ _` | | '_ \
|  _  |  __/ | | (_) |  / ___ \| | (_| | | | | |
|_| |_|\___|_|_|\___/  /_/   \_\_|\__,_|_|_| |_|




# --SEARCHING FOR THE PKG 'COW'
root@debianvm11:/home/alain# apt search speaking cow
Sorting... Done
Full Text Search... Done


# --INSTALL COWSAY
root@debianvm11:/home/alain# apt install cowsay
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Suggested packages:
  filters cowsay-off
The following NEW packages will be installed:
  cowsay
0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.

# --REMOVE COWSAY
root@debianvm11:/home/alain# apt remove cowsay
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following packages will be REMOVED:
  cowsay
0 upgraded, 0 newly installed, 1 to remove and 1 not upgraded.
After this operation, 94.2 kB disk space will be freed.
Do you want to continue? [Y/n] Y
(Reading database ... 37416 files and directories currently installed.)
Removing cowsay (3.03+dfsg2-8) ...
Processing triggers for man-db (2.9.4-2) ...

# --UPDATE
root@debianvm11:/home/alain# apt update
Get:1 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]
Get:2 http://security.debian.org/debian-security bullseye-security InRelease [48.4 kB]
Hit:3 http://deb.debian.org/debian bullseye InRelease
Get:4 http://security.debian.org/debian-security bullseye-security/main Sources [160 kB]
Get:5 http://security.debian.org/debian-security bullseye-security/main amd64 Packages [258 kB]
Get:6 http://security.debian.org/debian-security bullseye-security/main Translation-en [166 kB]
Fetched 675 kB in 0s (1,887 kB/s)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done


# -- The main applications offered by OpenOffice/LibreOffice are:
# -- -- Writer=Text editor
# -- -- Calc=>Spreadsheets
# -- -- Impress=>Presentations
# -- -- Draw=>Vector drawing
# -- -- Math=>Math formulas
# -- -- Base=>Database

# --DATA SHARING
# --NFS
# --Between Linux machines, NFS (Network File System)
# --SAMBA
# --Samba implements a protocol for sharing files over the network originally made for the
# --Windows operating system, but today is compatible with all major operating systems

# --DOMAIN CONTROLER WINDOWS
# --The authorization given upon login on a workstation is granted by a central server
# --domain controller : The domain controller is a service provided by Microsoft’s Active Directory.

# --LINUX DOMAIN CONTROLER
# --workstations can associate with a domain controller by using Samba or an authentication
# --subsystem called SSSD

#-- 1.3 Open Source Software and Licensing -- page 37

# --Criteria of Free Software by Free Software Foundation (FSF) and Richard Stallman
# --0 - The freedom to run the program as you wish, for any purpose (freedom 0).”
# --1 - The freedom to study how the program works, and change it so it does your computing as you wish (freedom 1).
# --2 - The freedom to redistribute copies so you can help others (freedom 2).
# --3 - The freedom to distribute copies of your modified versions to others (freedom 3).

# --FLOSS = Free Software + Open Source Software

# -- Free Software = four freedoms goes back to Richard Stallman and the GNU project founded by him in 1985 => ideological — movement
# -- Open source software = The openness of the source code itself changed from a technical requirement to a defining feature: as soon as the source code was visible, the software was considered “open source”. Gave way to a more pragmatic approach to software development.
 
# --COPYLEFT
# -- GPL - GNU General Public License (GPL)
# -- LGPL - GNU Lesser General Public License (LGPL) -> case-specificcustomizations

# --Creative Commons (CC)
# -- 0 - CC BY (“Attribution”) : The free license that allows anyone to edit and distribute the work as long as they name the author.
# -- 1 - CC BY-SA (“Attribution-ShareAlike”) : As CC BY, except that the modified work may only be distributed under the same license. The principle reminds of the copyleft, because the license is “inherited” here as well.
# -- 2 - CC BY-ND (“Attribution-NoDerivatives”) Like CC BY, except that the work may only be passed on unmodified.

# --3- CC BY-NC (“Attribution-NonCommercial”) The work may be edited and distributed by naming the author, but only under non-commercial conditions.
# --4 - CC BY-NC-SA (“Attribution-NonCommercial-ShareAlike”) As BY-NC, except that the work may only be shared under the same conditions (i.e. a copyleftlike license).
# --5 - CC BY-NC-ND (“Attribution-NonCommercial-NoDerivatives”) The most restrictive license: the distribution is allowed with attribution of the author, but only unchanged and under non-commercial conditions.


#--1.4 Compétences en TIC et Travail sous Linux

#-- OpenStack : collection of open source software that can make use of different hypervisors and other tools in order to offer a complete IaaS cloud environment on premise.

#--RevealJS : HTML Framework
#--Beamer : to create presentation
#--Lightbeam: Firefox extensions to control cookies

# --SaaS
# --Software as a Service (SaaS) is another business model, especially for web-based technologies.
# --Dropbox and Salesforce are two good examples of SaaS

# --Iaas
# --IaaS (Infrastructure as a service)
# --Linux is heavily used among the software and Internet industries. Sites like W3Techs report that about 68% of the website servers on the Internet are powered by Unix. multiple operating systems running as guests on a host machine over an important piece of software that is called a "hypervisor"
# --!!! Linux has three well know open source hypervisors: Xen, KVM and VirtualBox

# --PaaS
# --PaaS (Platform as a Service)
# --Heroku is a common PaaS example where program code can just be run without taking care of the underlying containers and virtual machines.

# --Do Not Track (DNT)
# --Currently, DNT is just a way for you to tell the websites you visit that you do not want them to track you. But, in fact, they are the ones who will decide if they will respect your choice or not.

# --TLS : Transport Layer Security # -- TLS is the successor of the Secure Sockets Layer (SSL) which has been deprecated because of serious flaws

# --PASSWROD SOLUTION
# --Bitwarden, KeyPass


# --DISK ENCRYPTION
# --Two methods available: 'stacked' OR 'block'
# -- - 0 - GnuPG : sign, encrypt, and decrypt texts, e-mails, files, directories, and even whole, disk partitions. It works with public-key cryptography
# -- - 1 - "'stacked'" : ex: EncFS (encrypt Filesystem Linux) or entire disk.
# -- - 2 - "'block'" device encryption : ex: dm-crypt, Veracrypt


# --// Topic 2: Finding Your Way on a Linux System
# -- 2.1 Command Line Basics -- page 72


# -- On Ubuntu or Debian GNU/Linux, the prompt for a regular user will likely look like this:
carol@mycomputer:~$
alain@ubuntuserver22:~$

# --On CentOS or Red Hat Linux, the prompt for a regular user will instead look like this:
[dave@mycomputer ~]$

# --ECHO AND VARIABLES NAMES

# --Examples :
alain@ubuntuserver22:~$ echo $HOME
/home/alain
alain@ubuntuserver22:~$ echo $USER
alain



# --EXTERNAL 
# --These commands reside in individual files ("/usr/bin/"). Users can create their own external

alain@ubuntuserver22:~$ type echo
echo is a shell builtin
alain@ubuntuserver22:~$ type man
man is /usr/bin/man
alain@ubuntuserver22:~$

# --QUOTING
# --In Bash, there are three types of quotes:
# --• Double quotes
# --• Single quotes
# --• Escape characters

# --QUOTING Example (Creating files):
alain@ubuntuserver22:~$ TWO="toto"
alain@ubuntuserver22:~$ touch TWO
alain@ubuntuserver22:~$ ls -l
total 60
-rw-r# --r# -- 1 alain alain  8811 Nov  2 15:26 'erver22:~$ pstree'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'ervice loaded active exited Load AppArmor profiles'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26  pat
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'tate, values depend on unit type.'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:16  TWO
alain@ubuntuserver22:~$ touch "$TWO"
alain@ubuntuserver22:~$ ls -l
total 60
-rw-r# --r# -- 1 alain alain  8811 Nov  2 15:26 'erver22:~$ pstree'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'ervice loaded active exited Load AppArmor profiles'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26  pat
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'tate, values depend on unit type.'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:17  toto
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:16  TWO
alain@ubuntuserver22:~$ touch '$TWO'
alain@ubuntuserver22:~$ ls -l
total 60
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:18 '$TWO'
-rw-r# --r# -- 1 alain alain  8811 Nov  2 15:26 'erver22:~$ pstree'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'ervice loaded active exited Load AppArmor profiles'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26  pat
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'tate, values depend on unit type.'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:17  toto
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:16  TWO

alain@ubuntuserver22:~$ ll
total 96
drwxr-x# --- 3 alain alain  4096 Nov  8 11:18  ./
drwxr-xr-x 5 root  root   4096 Oct 31 10:42  ../
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:18 '$TWO'
-rw# --# --# --- 1 alain alain  1904 Nov  7 15:48  .bash_history
-rw-r# --r# -- 1 alain alain   220 Oct 31 10:42  .bash_logout
-rw-r# --r# -- 1 alain alain  3771 Oct 31 10:42  .bashrc
drwx# --# --# -- 2 alain alain  4096 Oct 31 10:54  .cache/
-rw-r# --r# -- 1 alain alain  8811 Nov  2 15:26 'erver22:~$ pstree'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'ervice loaded active exited Load AppArmor profiles'
-rw# --# --# --- 1 alain alain    20 Nov  8 11:16  .lesshst
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26  pat
-rw-r# --r# -- 1 alain alain   807 Oct 31 10:42  .profile
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'tate, values depend on unit type.'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:17  toto
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:16  TWO


# --DOUBLE QUOTES

# --Tell the shell to take the text in between the quote marks ("...") as regular characters. All special characters lose their meaning, except the $ (dollar sign),\ (backslash) and `(backquote)

# --For example, the substitution of the $USER variable is not affected by the double quotes.

alain@ubuntuserver22:~$ echo moi je suis $USER
moi je suis alain
alain@ubuntuserver22:~$ echo "moi je suis $USER"
moi je suis alain

# --SPACE
# --A space character, on the other hand, loses its meaning as an argument separator:

# --Example1:
alain@ubuntuserver22:~$ touch new file debian
alain@ubuntuserver22:~$ ll -l
total 96
drwxr-x# --- 3 alain alain  4096 Nov  8 11:33  ./
drwxr-xr-x 5 root  root   4096 Oct 31 10:42  ../
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:18 '$TWO'
-rw# --# --# --- 1 alain alain  1904 Nov  7 15:48  .bash_history
-rw-r# --r# -- 1 alain alain   220 Oct 31 10:42  .bash_logout
-rw-r# --r# -- 1 alain alain  3771 Oct 31 10:42  .bashrc
drwx# --# --# -- 2 alain alain  4096 Oct 31 10:54  .cache/
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:33  debian
-rw-r# --r# -- 1 alain alain  8811 Nov  2 15:26 'erver22:~$ pstree'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'ervice loaded active exited Load AppArmor profiles'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:33  file
-rw# --# --# --- 1 alain alain    20 Nov  8 11:16  .lesshst
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:33  new
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26  pat
-rw-r# --r# -- 1 alain alain   807 Oct 31 10:42  .profile
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'tate, values depend on unit type.'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:17  toto
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:16  TWO
-rw# --# --# --- 1 alain alain  1483 Oct 31 14:55  .viminfo
...


# --Exemple2:
alain@ubuntuserver22:~$ touch "new file debian"
alain@ubuntuserver22:~$ ll -l
total 96
drwxr-x# --- 3 alain alain  4096 Nov  8 11:34  ./
drwxr-xr-x 5 root  root   4096 Oct 31 10:42  ../
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:18 '$TWO'
-rw# --# --# --- 1 alain alain  1904 Nov  7 15:48  .bash_history
-rw-r# --r# -- 1 alain alain   220 Oct 31 10:42  .bash_logout
-rw-r# --r# -- 1 alain alain  3771 Oct 31 10:42  .bashrc
drwx# --# --# -- 2 alain alain  4096 Oct 31 10:54  .cache/
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:33  debian
-rw-r# --r# -- 1 alain alain  8811 Nov  2 15:26 'erver22:~$ pstree'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'ervice loaded active exited Load AppArmor profiles'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:33  file
-rw# --# --# --- 1 alain alain    20 Nov  8 11:16  .lesshst
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:33  new
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:34 'new file debian'


# --SINGLE QUOTES
# --They revoke any special meaning from each character.

alain@ubuntuserver22:~$ echo 'moi je suis $USER'
moi je suis $USER
alain@ubuntuserver22:~$ echo moi je suis $USER
moi je suis alain
alain@ubuntuserver22:~$

# --BACKSLASH

This in turn will not let Bash expand the variable’s value to the username of the person running the command, but will instead interpret the variable name literally

alain@ubuntuserver22:~$ echo $USER
alain
alain@ubuntuserver22:~$ echo \$USER
$USER


# --FIND A PARTICULAR COMMAND: (They are all located in "/usr/bin/")

alain@ubuntuserver22:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
alain@ubuntuserver22:~$ which find
/usr/bin/find
alain@ubuntuserver22:~$ which mount
/usr/bin/mount
alain@ubuntuserver22:~$ which nano
/usr/bin/nano

#--'echo' with '-n' option -> It does not carriage return.
alainalain@ubuntuserver22:~/3_2_redirect_error$ echo $USER
alain
alain@ubuntuserver22:~/3_2_redirect_error$ echo -n $USER
alainalain@ubuntuserver22:~/3_3_bash_script$


# --INTERSTING EX For Time:
alain@ubuntuserver22:~$ date
Wed Nov  8 11:55:17 AM UTC 2023

# -- calendar
root@localhost oracle]# cal -yyyy
                               2023                               

       January               February                 March       
Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa
 1  2  3  4  5  6  7             1  2  3  4             1  2  3  4
 8  9 10 11 12 13 14    5  6  7  8  9 10 11    5  6  7  8  9 10 11
15 16 17 18 19 20 21   12 13 14 15 16 17 18   12 13 14 15 16 17 18
22 23 24 25 26 27 28   19 20 21 22 23 24 25   19 20 21 22 23 24 25
29 30 31               26 27 28               26 27 28 29 30 31   
                                                                  
        April                   May                   June        
Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa
                   1       1  2  3  4  5  6                1  2  3
 2  3  4  5  6  7  8    7  8  9 10 11 12 13    4  5  6  7  8  9 10
 9 10 11 12 13 14 15   14 15 16 17 18 19 20   11 12 13 14 15 16 17
16 17 18 19 20 21 22   21 22 23 24 25 26 27   18 19 20 21 22 23 24
23 24 25 26 27 28 29   28 29 30 31            25 26 27 28 29 30   
30                                                                
        July                  August                September     
Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa
                   1          1  2  3  4  5                   1  2
 2  3  4  5  6  7  8    6  7  8  9 10 11 12    3  4  5  6  7  8  9
 9 10 11 12 13 14 15   13 14 15 16 17 18 19   10 11 12 13 14 15 16
16 17 18 19 20 21 22   20 21 22 23 24 25 26   17 18 19 20 21 22 23
23 24 25 26 27 28 29   27 28 29 30 31         24 25 26 27 28 29 30
30 31                                                             
       October               November               December      
Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa
 1  2  3  4  5  6  7             1  2  3  4                   1  2
 8  9 10 11 12 13 14    5  6  7  8  9 10 11    3  4  5  6  7  8  9
15 16 17 18 19 20 21   12 13 14 15 16 17 18   10 11 12 13 14 15 16
22 23 24 25 26 27 28   19 20 21 22 23 24 25   17 18 19 20 21 22 23
29 30 31               26 27 28 29 30         24 25 26 27 28 29 30

#-- 'time'                                              31     
alain@ubuntuserver22:~$ time

real    0m0.000s
user    0m0.000s
sys     0m0.000s


#-- 'timedatectl' 
alain@ubuntuserver22:~$ timedatectl
               Local time: Tue 2023-12-12 10:07:03 UTC
           Universal time: Tue 2023-12-12 10:07:03 UTC
                 RTC time: Tue 2023-12-12 10:07:01
                Time zone: Etc/UTC (UTC, +0000)
System clock synchronized: no
              NTP service: inactive
          RTC in local TZ: no


# --CHECK WHETHER THE FOLLOWING CMDS ARE shell builtin OR external
# --Here mv, cat are external type

alain@ubuntuserver22:~$ type pwd
pwd is a shell builtin
alain@ubuntuserver22:~$ type mv
mv is /usr/bin/mv
alain@ubuntuserver22:~$ type cd
cd is a shell builtin
alain@ubuntuserver22:~$ type cat
cat is /usr/bin/cat
alain@ubuntuserver22:~$ type exit
exit is a shell builtin


# --CREATE SERIES OF FILES 
touch game{1..7}

alain@ubuntuserver22:~$ ll
total 96
drwxr-x# --- 3 alain alain  4096 Nov  8 11:57  ./
drwxr-xr-x 5 root  root   4096 Oct 31 10:42  ../
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:18 '$TWO'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:54  alain
-rw# --# --# --- 1 alain alain  1904 Nov  7 15:48  .bash_history
-rw-r# --r# -- 1 alain alain   220 Oct 31 10:42  .bash_logout
-rw-r# --r# -- 1 alain alain  3771 Oct 31 10:42  .bashrc
drwx# --# --# -- 2 alain alain  4096 Oct 31 10:54  .cache/
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:33  debian
-rw-r# --r# -- 1 alain alain  8811 Nov  2 15:26 'erver22:~$ pstree'
-rw-r# --r# -- 1 alain alain 13067 Nov  2 15:26 'ervice loaded active exited Load AppArmor profiles'
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:33  file
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:57  game1
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:57  game2
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:57  game3
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:57  game4
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:57  game5
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:57  game6
-rw-rw-r# -- 1 alain alain     0 Nov  8 11:57  game7

# --DELETE ALL OF THEM BY COMMON STRING (2 way)
 rm game?
 rm game*

# -- 2.1 Command Line Basics -- page 85
# --CREATE A LOCAL VARIABLES (Using $ you return its value)
# --exemple 1:

alain@ubuntuserver22:~$ greeting=hello
alain@ubuntuserver22:~$ echo greeting
greeting
alain@ubuntuserver22:~$ echo $greeting
hello

"!" that variables always exist in a specific shell only.

# --exemple 2:
alain@ubuntuserver22:~$ ME=$USER:$HOME
alain@ubuntuserver22:~$ echo $ME
alain:/home/alain

# --DELETE LOCAL VARIABLES with 'unset' command

alain@ubuntuserver22:~$ unset greeting
alain@ubuntuserver22:~$ echo $greeting

# --GLOBAL VARIABLE FOR SUBPROCESS

alain@ubuntuserver22:~$ export greeting=zod
alain@ubuntuserver22:~$ echo $greeting
zod
alain@ubuntuserver22:~$ bash -c $greeting
bash: line 1: zod: command not found
alain@ubuntuserver22:~$ bash -c 'echo $greeting vs Superman'
zod vs Superman

# --GLOBAL VARIABLE FOR SUBPROCESS


# --ENVIRONNEMENT GLOBAL VARIABLE FOR SUBPROCESS ex: TZ
alain@ubuntuserver22:~$ TZ=GMT date
Wed Nov  8 12:14:48 PM GMT 2023
alain@ubuntuserver22:~$ TZ=EST date
Wed Nov  8 07:15:03 AM EST 2023

# --GIVE COMMAND RESULT TO A VARIABLE ex1
alain@ubuntuserver22:~$ nr_files=`wc -l /etc/passwd`
alain@ubuntuserver22:~$ echo $nr_files
35 /etc/passwd

# --GIVE COMMAND RESULT TO A VARIABLE ex2
alain@ubuntuserver22:~$ today=$(TZ=GMT date)
alain@ubuntuserver22:~$ echo $today
Thu Nov 9 03:32:57 PM GMT 2023


# --THE 'PATH' VARIABLE !!! VERY IMPORTANT COMMAND
# --It stores a list of directories, separated by a colon, that contain executable programs eligible as commands from the Linux shell.

# --UBUNTU SERVER
alain@ubuntuserver22:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin

# --DEBIAN
alain@debianvm11:~$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games

# --APPEND NEW DIR TO THE 'PATH' COMMAND
# --To append a new directory to the variable, we use the colon sign (:).

alain@ubuntuserver22:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin

# --Add the (:)
alain@ubuntuserver22:~$ echo $PATH:/home/alain/
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/alain/
alain@ubuntuserver22:~$ PATH=$PATH:/home/alain/
alain@ubuntuserver22:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/alain/

# --REMOVE A VARIABLE FROM 'PATH' (The command cannot be found)

alain@ubuntuserver22:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/alain/
alain@ubuntuserver22:~$ PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/alain/
alain@ubuntuserver22:~$ which nano
/bin/nano
alain@ubuntuserver22:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/alain/
alain@ubuntuserver22:~$ PATH=/home/alain/
alain@ubuntuserver22:~$ echo $PATH
/home/alain/
alain@ubuntuserver22:~$ which nano
Command 'which' is available in the following places
 * /bin/which
 * /usr/bin/which
The command could not be located because '/bin:/usr/bin' is not included in the PATH environment variable.
which: command not found

# --RESET 'PATH' AS IT WAS - THEN 'which nano' OK!
alain@ubuntuserver22:~$ PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/alain/
alain@ubuntuserver22:~$ which nano
/bin/nano

# --ENVIRONNEMENT VARIABLES UBUNTU SERVER
alain@ubuntuserver22:~$ env
SHELL=/bin/bash
PWD=/home/alain
LOGNAME=alain
XDG_SESSION_TYPE=tty
MOTD_SHOWN=pam
HOME=/home/alain
LANG=en_US.UTF-8
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
SSH_CONNECTION=10.0.2.2 60638 10.0.2.16 22
LESSCLOSE=/usr/bin/lesspipe %s %s
XDG_SESSION_CLASS=user
TERM=xterm
LESSOPEN=| /usr/bin/lesspipe %s
USER=alain
SHLVL=1
XDG_SESSION_ID=1
XDG_RUNTIME_DIR=/run/user/1001
greeting=zod
SSH_CLIENT=10.0.2.2 60638 22
XDG_DATA_DIRS=/usr/local/share:/usr/share:/var/lib/snapd/desktop
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/alain/
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1001/bus
SSH_TTY=/dev/pts/0
_=/bin/env


# --ENVIRONNEMENT VARIABLES DEBIAN SERVER

alain@debianvm11:~$ env
SHELL=/bin/bash
PWD=/home/alain
LOGNAME=alain
XDG_SESSION_TYPE=tty
MOTD_SHOWN=pam
HOME=/home/alain
LANG=en_US.UTF-8
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
SSH_CONNECTION=10.0.2.2 52048 10.0.2.17 22
XDG_SESSION_CLASS=user
TERM=xterm
USER=alain
SHLVL=1
XDG_SESSION_ID=1
XDG_RUNTIME_DIR=/run/user/1001
SSH_CLIENT=10.0.2.2 52048 22
PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
SSH_TTY=/dev/pts/0
_=/usr/bin/env
alain@debianvm11:~$

#-- 2.2 Lesson 1 --2.2 Using the Command Line to Get Help 
alain@ubuntuserver22:~$ info mkdir
Next: mkfifo invocation,  Prev: ln invocation,  Up: Special file types

12.3 ‘mkdir’: Make directories
==============================

‘mkdir’ creates directories with the specified names.  Synopsis:

     mkdir [OPTION]... NAME...

   ‘mkdir’ creates each directory NAME in the order given.  It reports
an error if NAME already exists, unless the ‘-p’ option is given and
NAME is a directory.

   The program accepts the following options.  Also see *note Common
options::.

‘-m MODE’
‘--mode=MODE’
     Set the file permission bits of created directories to MODE, which
     uses the same syntax as in ‘chmod’ and uses ‘a=rwx’ (read, write
     and execute allowed for everyone) for the point of the departure.
     *Note File permissions::.
.........

#-- command 'apropos' equivalent to 'man -k' 1
alain@ubuntuserver22:~$ apropos find
btrfs-find-root (8)  - filter to find btrfs root
find (1)             - search for files in a directory hierarchy
findfs (8)           - find a filesystem by label or UUID
findmnt (8)          - find a filesystem
git-bisect (1)       - Use binary search to find the commit that introduced a bug
git-cherry (1)       - Find commits yet to be applied to upstream
git-merge-base (1)   - Find as good common ancestors as possible for a merge
git-name-rev (1)     - Find symbolic names for given revs
git-pack-redundant (1) - Find redundant pack files
locate.findutils (1) - list files in databases that match a pattern
Module::Find (3pm)   - Find and use installed modules in a (sub)category
pidof (8)            - find the process ID of a running program.
systemd-delta (1)    - Find overridden configuration files
updatedb.findutils (1) - update a file name database
xdg-user-dir (1)     - Find an XDG user dir

#-- command 'apropos' equivalent to 'man -k' 2
alain@ubuntuserver22:~$ man -k find
btrfs-find-root (8)  - filter to find btrfs root
find (1)             - search for files in a directory hierarchy
findfs (8)           - find a filesystem by label or UUID
findmnt (8)          - find a filesystem
git-bisect (1)       - Use binary search to find the commit that introduced a bug
git-cherry (1)       - Find commits yet to be applied to upstream
git-merge-base (1)   - Find as good common ancestors as possible for a merge
git-name-rev (1)     - Find symbolic names for given revs
git-pack-redundant (1) - Find redundant pack files
locate.findutils (1) - list files in databases that match a pattern
Module::Find (3pm)   - Find and use installed modules in a (sub)category
pidof (8)            - find the process ID of a running program.
systemd-delta (1)    - Find overridden configuration files
updatedb.findutils (1) - update a file name database
xdg-user-dir (1)     - Find an XDG user dir


#-- 'find' COMMAND WITH REGULAR EXPR --EXAMPLE 1
alain@ubuntuserver22:/$ find ~ -name ala
alain@ubuntuserver22:/$ find ~ -name alain
/home/alain
/home/alain/alain
alain@ubuntuserver22:/$ find ~ -name "ala"
alain@ubuntuserver22:/$ find ~ -name "ala*"
/home/alain
/home/alain/alain

#-- 'find' COMMAND WITH REGULAR EXPR -- EXAMPLE 2
alain@ubuntuserver22:~$ sudo find / -name Testing
alain@ubuntuserver22:~$ sudo find / -name "*Testing*"
/home/alain/Testing.txt
alain@ubuntuserver22:~$ sudo find / -name "Testing*"
/home/alain/Testing.txt
alain@ubuntuserver22:~$ sudo find / -name "Testing"

#-- 'find' COMMAND WITH (.) OR (~) -- EXAMPLE 3
alain@ubuntuserver22:~$ sudo find / -name Testing.txt
/home/alain/Testing.txt
alain@ubuntuserver22:~$ find . -name Testing.txt
./Testing.txt
alain@ubuntuserver22:~$ find ~ -name Testing.txt
/home/alain/Testing.txt

#-- 'find' FILES ENDING WITH A NUMBER -- EXAMPLE 4
alain@ubuntuserver22:~$ touch testing{1..6}
alain@ubuntuserver22:~$ ll
total 100
drwxr-x--- 3 alain alain  4096 Nov 13 13:23  ./
drwxr-xr-x 5 root  root   4096 Oct 31 10:42  ../
-rw-rw-r-- 1 alain alain     0 Nov  8 11:18 '$TWO'
-rw-rw-r-- 1 alain alain     0 Nov 13 12:57  10k
-rw-rw-r-- 1 alain alain     0 Nov  8 11:54  alain
-rw------- 1 alain alain  3644 Nov 10 08:33  .bash_history
-rw-r--r-- 1 alain alain   220 Oct 31 10:42  .bash_logout
-rw-r--r-- 1 alain alain  3771 Oct 31 10:42  .bashrc
drwx------ 2 alain alain  4096 Oct 31 10:54  .cache/
-rw-rw-r-- 1 alain alain     0 Nov  8 11:33  debian
-rw-r--r-- 1 alain alain  8811 Nov  2 15:26 'erver22:~$ pstree'
-rw-r--r-- 1 alain alain 13067 Nov  2 15:26 'ervice loaded active exited Load AppArmor profiles'
-rw-rw-r-- 1 alain alain     0 Nov  8 11:33  file
-rw-rw-r-- 1 alain alain    27 Nov 13 12:01  filetr.txt
-rw------- 1 alain alain    20 Nov 13 12:58  .lesshst
-rw-rw-r-- 1 alain alain     0 Nov  8 11:33  new
-rw-rw-r-- 1 alain alain     0 Nov  8 11:34 'new file debian'
-rw-r--r-- 1 alain alain 13067 Nov  2 15:26  pat
-rw-r--r-- 1 alain alain   807 Oct 31 10:42  .profile
-rw-r--r-- 1 alain alain 13067 Nov  2 15:26 'tate, values depend on unit type.'
-rw-rw-r-- 1 alain alain     0 Nov 13 13:23  testing1
-rw-rw-r-- 1 alain alain     0 Nov 13 13:22 'testing[1..6]'
-rw-rw-r-- 1 alain alain     0 Nov 13 13:23  testing2
-rw-rw-r-- 1 alain alain     0 Nov 13 13:23  testing3
-rw-rw-r-- 1 alain alain     0 Nov 13 13:23  testing4
-rw-rw-r-- 1 alain alain     0 Nov 13 13:23  testing5
-rw-rw-r-- 1 alain alain     0 Nov 13 13:23  testing6
-rw-rw-r-- 1 alain alain     0 Nov 13 13:02  Testing.txt
-rw-rw-r-- 1 alain alain     0 Nov  8 11:17  toto
-rw-rw-r-- 1 alain alain     0 Nov  8 11:16  TWO
-rw------- 1 alain alain  1483 Oct 31 14:55  .viminfo
alain@ubuntuserver22:~$ find ~ -name "*[0-9]"
/home/alain/testing1
/home/alain/testing2
/home/alain/testing3
/home/alain/testing6
/home/alain/testing5
/home/alain/testing4

#--'find' works also with '' and " "
alain@ubuntuserver22:~/3_2_redirect_error$ find /home/alain/ -name '*.txt'
/home/alain/3_2_redirect_error/test_grep.txt
/home/alain/3_2_redirect_error/stdout.txt
/home/alain/3_2_redirect_error/field2.txt
/home/alain/3_2_redirect_error/test_name.txt
/home/alain/3_2_redirect_error/content-sorted.txt
/home/alain/3_2_redirect_error/stderr.txt
/home/alain/3_2_redirect_error/field1.txt
/home/alain/3_2_redirect_error/contents.txt
/home/alain/3_2_redirect_error/test_name?.txt
/home/alain/linux_essentials-3.1/compressionTest2/Zod.txt
/home/alain/Documents/Reports/report2018.txt

alain@ubuntuserver22:~/3_2_redirect_error$ find /home/alain/ -name "*.txt"
/home/alain/3_2_redirect_error/test_grep.txt
/home/alain/3_2_redirect_error/stdout.txt
/home/alain/3_2_redirect_error/field2.txt
/home/alain/3_2_redirect_error/test_name.txt
/home/alain/3_2_redirect_error/content-sorted.txt
/home/alain/3_2_redirect_error/stderr.txt
/home/alain/3_2_redirect_error/field1.txt
/home/alain/3_2_redirect_error/contents.txt
/home/alain/3_2_redirect_error/test_name?.txt
/home/alain/linux_essentials-3.1/compressionTest2/Zod.txt
/home/alain/Documents/Reports/report2018.txt

#--'tr' COMMAND CONVERT STRING --  tr perform character based transformation but sed perform string based transformation.
alain@ubuntuserver22:/$ echo "Welcome To Geeks  forGeeks" | tr [:space:] "Z"
WelcomeZToZGeeksZZforGeeksZalain@ubuntuserver22:/$


#--Running 'tr' without any options replaces each of the characters specified in SET1 with the characters from SET2 that have the same position.

alain@ubuntuserver22:~$ echo "Don talk Politik" | tr i X
Don talk PolXtXk

# 'tr' command example on a TXT file
alain@ubuntuserver22:~$ cat filetr.txt
DduDuudu
Donald Duck Daffy
 
alain@ubuntuserver22:~$ cat filetr.txt | tr u Z
DdZDZZdZ
Donald DZck Daffy

# -- locate' REQUIRE updatedb to work : example :
alain@ubuntuserver22:~$ touch /home/alain/Testing.txt
alain@ubuntuserver22:~$ locate Testing
alain@ubuntuserver22:~$ sudo updatedb
alain@ubuntuserver22:~$ locate Testing
/home/alain/Testing.txt


# -- EQUIVALENT RESULT  'find' & 'locate' :
alain@ubuntuserver22:~$ sudo find / -name README | tail -3
/etc/cloud/cloud.cfg.d/README
/etc/alternatives/README
/etc/grub.d/README
alain@ubuntuserver22:~$ locate -l 3 README
/etc/alternatives/README
/etc/apparmor.d/local/README
/etc/apport/blacklist.d/README.blacklist


# -- 2.3 Using Directories and Listing Files -- part 2 -- page 114

# - SPACE IN DIRECTORY NAME AND HOW TO ACCESS IT:
alain@ubuntuserver22:~$ mkdir "this is a test"
alain@ubuntuserver22:~$ cd this\ is\ a\ test/
alain@ubuntuserver22:~/this is a test$

# - (\) IN DIRECTORY NAME AND HOW TO ACCESS IT:
alain@ubuntuserver22:~/this is a test$ mkdir my\\dir\\test
alain@ubuntuserver22:~/this is a test$ ll
total 12
drwxrwxr-x 3 alain alain 4096 Nov 13 16:52  ./
drwxr-x--- 5 alain alain 4096 Nov 13 16:50  ../
drwxrwxr-x 2 alain alain 4096 Nov 13 16:52 'my\dir\test'/

# -- 2.3 Using Directories and Listing Files -- page 127

# -- HOW DEEP YOU WANT TO GO WITHIN THE TREE -Example 1
alain@ubuntuserver22:/$ tree -L 1
.
├── bin -> usr/bin
├── boot
├── dev
├── etc
├── home
├── lib -> usr/lib
├── lib32 -> usr/lib32
├── lib64 -> usr/lib64
├── libx32 -> usr/libx32
├── lost+found
├── media
├── mnt
├── opt
├── proc
├── root
├── run
├── sbin -> usr/sbin
├── snap
├── srv
├── swap.img
├── sys
├── tmp
├── usr
└── var

# -- HOW DEEP YOU WANT TO GO WITHIN THE TREE -Example 2
alain@ubuntuserver22:/etc$ tree -L 1 /home/
/home/
├── alain
├── lost+found
└── osboxes
# -- HOW DEEP YOU WANT TO GO WITHIN THE TREE -Example 3
3 directories, 0 files
alain@ubuntuserver22:/etc$ tree -L 2 /home/
/home/
├── alain
│   ├── Documents
│   └── this is a test
├── lost+found  [error opening dir]
└── osboxes  [error opening dir]

5 directories, 0 files

#-- Relative-to-Home File Paths

alain@ubuntuserver22:~/Documents/Reports$ ls ~
 Documents  'this is a test'
alain@ubuntuserver22:~/Documents/Reports$ ls ~ alain
ls: cannot access 'alain': No such file or directory
/home/alain:
 Documents  'this is a test'
alain@ubuntuserver22:~/Documents/Reports$


 #--ACCESS THE END OF A TXT FILE report2018.txt FROM /home/alain/Documents/Reports
 
 alain@ubuntuserver22:~/Documents/Reports$ less ~alain/Documents/Reports/report2018.txt
 
 
 #-- 'cd' enable to return to user '/home/user'
 alain@ubuntuserver22:~/5_3_play_permission$ pwd
/home/alain/5_3_play_permission
alain@ubuntuserver22:~/5_3_play_permission$ cd
alain@ubuntuserver22:~$ pwd
/home/alain

# access to network basics info
 alain@ubuntuserver22:~/2_1_cmd_basic$ networkctl
IDX LINK   TYPE     OPERATIONAL SETUP
  1 lo     loopback carrier     unmanaged
  2 enp0s3 ether    routable    configured

# -- 'alias' creation
alain@ubuntuserver22:~$ alias dop3='du -hS | sort -n'
# -- 'alias' result
alain@ubuntuserver22:~$ dop3
1.5M    ./3_1_compression/compression/alain/linux_essentials-3.1/tar
1.5M    ./3_1_compression/tar
3.3M    ./3_1_compression/compression/alain/linux_essentials-3.1/compression
4.0K    ./3_1_compression/archiving/untar
4.0K    ./3_1_compression/compression/alain
4.0K    ./3_1_compression/compression/alain/linux_essentials-3.1
4.0K    ./3_1_compression/compression/alain/linux_essentials-3.1/compressionin

 
 
#--2.4 Creating, Moving and Deleting Files 'p' (means parents) enable to mkdir with another creating dir

mkdir -p /tmp/outfiles/text/today /tmp/infiles/text/today

#--EXAMPLE OF GLOBING

alain@ubuntuserver22:/tmp/outfiles/text/today$ ls
log_+_2017_Feb_01.txt  log_3_2017_Jan_01.txt  log_b_2007_Mar_01.txt  log_f_201A_Wednesday_01.txt

#--FILES FOUND IS log_f_201A_Wednesday_01.txt
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls log_[a-z]_201?_*_01.txt
log_f_201A_Wednesday_01.txt
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls *og_[a-z]_201?_*_01.txt
log_f_201A_Wednesday_01.txt
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls ?og_[a-z]_201?_*_01.txt
log_f_201A_Wednesday_01.txt
alain@ubuntuserver22:/tmp/outfiles/text/today$

#--FILES FOUND WITH ?? 
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls ?og_[a-z]_20??_*_01.txt
log_b_2007_Mar_01.txt  log_f_201A_Wednesday_01.txt

#--regular exp [[:digit:]]
 alain@ubuntuserver22:/tmp/linux_essential-2.4$ ls question[[:digit:]]
question1  question2  question3  question4  question5  question6  question7  question8  question9

#--regular exp interval [x:y]
alain@ubuntuserver22:/tmp/linux_essential-2.4$ ls question[1..3]
question1  question3

#--Difference between (*) and (/)
alain@ubuntuserver22:/tmp/linux_essential-2.4$ ls question1?
question10
alain@ubuntuserver22:/tmp/linux_essential-2.4$ ls question1*
question1  question10

#-- OTHER Examples
alain@ubuntuserver22:/tmp/outfiles/text/today$ touch file{1..20}
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls file[1-3-15]*
file1  file10  file11  file12  file13  file14  file15  file16  file17  file18  file19  file2  file20  file3  file5
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls file[1-3-15]
file1  file2  file3  file5
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls file[1-3-6a-15]
file1  file2  file3  file5  file6
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls file[1-3-5b-20]
file1  file2  file3  file5
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls file[1a5]
file1  file5
alain@ubuntuserver22:/tmp/outfiles/text/today$ ls file[^e]
file1  file2  file3  file4  file5  file6  file7  file8  file9

#--(p) enable keep ownership in copying files/folders
alain@ubuntuserver22:/ man cp
 -p     same as --preserve=mode,ownership,timestamps
 
#--(i) prompt before overwrite on destination files
alain@ubuntuserver22:/ man mv
  -i, --interactive
              prompt before overwrite
 
 
#--(n) does not overwrite on destination files
alain@ubuntuserver22:/ man mv
 -n, --no-clobber
              do not overwrite an existing file

#--(u) does not overwrite if destination files are newer
alain@ubuntuserver22:/ man cp
       -u, --update
              copy  only  when  the SOURCE file is newer than the destination file or when the destination file is
              missing


#--3.1 Lesson 1
#--3.1 Archiving Files on the Command Line

#--Some common lossless ones are bzip2,gzip, and xz.

#--files creation
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cp bigfile bigfile2
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cp bigfile bigfile3
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cp bigfile bigfile4

alain@ubuntuserver22:~/linux_essentials-3.1/compression$ ll -h
total 1.2M
drwxrwxr-x 2 alain alain 4.0K Nov 15 10:05 ./
drwxrwxr-x 4 alain alain 4.0K Nov 15 09:31 ../
-rw-rw-r-- 1 alain alain 284K Nov 15 09:32 bigfile
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile2
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile3
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile4

#--Running compression tools
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ bzip2 bigfile2
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ gzip bigfile3
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ xz bigfile4

#--Size result after Running compression tools -Compare the sizes of the compressed files to the uncompressed file named bigfile. Also notice how the compression tools added extensions to the file names and removed the uncompressed files.
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ ll -h
total 576K
drwxrwxr-x 2 alain alain 4.0K Nov 15 10:06 ./
drwxrwxr-x 4 alain alain 4.0K Nov 15 09:31 ../
-rw-rw-r-- 1 alain alain 284K Nov 15 09:32 bigfile
-rw-rw-r-- 1 alain alain  96K Nov 15 10:05 bigfile2.bz2
-rw-rw-r-- 1 alain alain  99K Nov 15 10:05 bigfile3.gz
-rw-rw-r-- 1 alain alain  86K Nov 15 10:05 bigfile4.xz

#--Use bunzip2, gunzip, or unxz to decompress the files
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ bunzip2 bigfile2.bz2
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ gunzip bigfile3.gz
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ unxz bigfile4.xz

#--Notice again that now the compressed file is deleted once it is decompressed.
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ ll -h
total 1.2M
drwxrwxr-x 2 alain alain 4.0K Nov 15 10:13 ./
drwxrwxr-x 4 alain alain 4.0K Nov 15 09:31 ../
-rw-rw-r-- 1 alain alain 284K Nov 15 09:32 bigfile
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile2
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile3
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile4

#--Some compression tools support different compression levels. A higher compression level usually requires more memory and CPU cycles, but results in a smaller compressed file. The opposite is true for a lower level. Below is a demonstration with xz and gzip:
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cp bigfile bigfile-gz1
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cp bigfile bigfile-gz9
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ gzip -1 bigfile-gz1
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ gzip -9 bigfile-gz9
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cp bigfile bigfile-xz1
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cp bigfile bigfile-xz9


#Copie file to where we ARE
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cp /etc/hosts ./
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ ll
total 1452
drwxrwxr-x 2 alain alain   4096 Nov 15 10:47 ./
drwxrwxr-x 4 alain alain   4096 Nov 15 09:31 ../
-rw-rw-r-- 1 alain alain 290625 Nov 15 10:28 bigfile
-rw-rw-r-- 1 alain alain 290625 Nov 15 10:05 bigfile2
-rw-rw-r-- 1 alain alain 290625 Nov 15 10:05 bigfile3
-rw-rw-r-- 1 alain alain 290625 Nov 15 10:05 bigfile4
-rw-rw-r-- 1 alain alain 112276 Nov 15 10:21 bigfile-gz1.gz
-rw-rw-r-- 1 alain alain 100813 Nov 15 10:21 bigfile-gz9.gz
-rw-rw-r-- 1 alain alain  92904 Nov 15 09:32 bigfile.xz
-rw-r--r-- 1 alain alain    222 Nov 15 10:47 hosts

# VIEW ITS CONTENT
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cat hosts
127.0.0.1 localhost
127.0.1.1 osboxes
# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

#-- We create a .gz hosts
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ gzip hosts

#-- The command (zcap) enables to view a .gz compressed file
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ zcat hosts.gz
127.0.0.1 localhost
127.0.1.1 osboxes
# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
alain@ubuntuserver22:~/linux_essentials-3.1/compression$

#--Archiving Tools -- The tar program is probably the most widely used archiving tool on Linux systems
#--The c option instructs tar to create a new archive file and the f option is the name of the file tocreate.
#-- The tar command has a few options that are worth memorizing. They are x for extract, c for create, t for view contents, and u to add or replace files. The v option lists the files which are processed by tar while creating or extracting an archive.
#-- If you wish to use the absolute path in a tar file, you must use the P option. Be aware that this may overwrite important files and might cause errors on your system.  

alain@ubuntuserver22:~/linux_essentials-3.1/archiving$ man tar

#-- append file to tar file 'r' or 'u'
#-- 'tar' -t argument


-r, --append
              Append files to the end of an archive.  Arguments have the same meaning as for -c (--create).


 -u, --update
              Append files which are newer than the corresponding copy in the archive.  Arguments  have  the  same
              meaning as with -c and -r options.  Notice, that newer files don't replace their old archive copies,
              but instead are appended to the end of archive.  The resulting archive can thus contain several mem‐
              bers of the same name, corresponding to various versions of the same file

 -t, --list
              List the contents of an archive.  Arguments are optional.  When given, they specify the names of the
              members to list.

 -z, --gzip, --gunzip, --ungzip
              Filter the archive through gzip(1).


#--example with 3.1.tar
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ cd ~/linux_essentials-3.1
alain@ubuntuserver22:~/linux_essentials-3.1$ tar cf archiving/3.1.tar compression
alain@ubuntuserver22:~/linux_essentials-3.1$ cd archiving/
alain@ubuntuserver22:~/linux_essentials-3.1/archiving$ ll -h
total 1.5M
drwxrwxr-x 2 alain alain 4.0K Nov 15 10:55 ./
drwxrwxr-x 4 alain alain 4.0K Nov 15 09:31 ../
-rw-rw-r-- 1 alain alain 1.5M Nov 15 10:59 3.1.tar


#--To view the contents of a tar ball we just created, use the t option of tar:
alain@ubuntuserver22:~/linux_essentials-3.1/archiving$ tar -tf 3.1.tar
compression/
compression/bigfile-gz9.gz
compression/bigfile4
compression/bigfile-gz1.gz
compression/bigfile.xz
compression/hosts.gz
compression/bigfile3
compression/bigfile
compression/bigfile2



#--tar files preserve the entire path to files when they are created. Since the file 3.1.tar was created with a single directory, that directory will be created relative to your current working directory when extracted.
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar cf ../tar/3.1-nodir.tar *

alain@ubuntuserver22:~/linux_essentials-3.1$ ll -hR
.:
total 20K
drwxrwxr-x 5 alain alain 4.0K Nov 15 11:24 ./
drwxr-x--- 6 alain alain 4.0K Nov 15 11:05 ../
drwxrwxr-x 2 alain alain 4.0K Nov 15 11:14 archiving/
drwxrwxr-x 2 alain alain 4.0K Nov 15 11:23 compression/
drwxrwxr-x 2 alain alain 4.0K Nov 15 11:25 tar/

./archiving:
total 1.5M
drwxrwxr-x 2 alain alain 4.0K Nov 15 11:14 ./
drwxrwxr-x 5 alain alain 4.0K Nov 15 11:24 ../
-rw-rw-r-- 1 alain alain 1.5M Nov 15 11:16 3.1.tar

./compression:
total 1.5M
drwxrwxr-x 2 alain alain 4.0K Nov 15 11:23 ./
drwxrwxr-x 5 alain alain 4.0K Nov 15 11:24 ../
-rw-rw-r-- 1 alain alain 284K Nov 15 10:28 bigfile
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile2
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile3
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile4
-rw-rw-r-- 1 alain alain 110K Nov 15 10:21 bigfile-gz1.gz
-rw-rw-r-- 1 alain alain  99K Nov 15 10:21 bigfile-gz9.gz
-rw-rw-r-- 1 alain alain  91K Nov 15 09:32 bigfile.xz
-rw-r--r-- 1 alain alain  169 Nov 15 10:47 hosts.gz

./tar:
total 1.5M
drwxrwxr-x 2 alain alain 4.0K Nov 15 11:25 ./
drwxrwxr-x 5 alain alain 4.0K Nov 15 11:24 ../
-rw-rw-r-- 1 alain alain 1.5M Nov 15 11:25 3.1-nodir.tar

#-- 'tar' program can also manage compression and decompression of archives on the fly. The most commonly used ones are j, J, and z for bzip2, xz, and gzip
#--Example with ''
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ ll
total 1452
drwxrwxr-x 2 alain alain   4096 Nov 15 11:23 ./
drwxrwxr-x 5 alain alain   4096 Nov 15 11:24 ../
-rw-rw-r-- 1 alain alain 290625 Nov 15 10:28 bigfile
-rw-rw-r-- 1 alain alain 290625 Nov 15 10:05 bigfile2
-rw-rw-r-- 1 alain alain 290625 Nov 15 10:05 bigfile3
-rw-rw-r-- 1 alain alain 290625 Nov 15 10:05 bigfile4
-rw-rw-r-- 1 alain alain 112276 Nov 15 10:21 bigfile-gz1.gz
-rw-rw-r-- 1 alain alain 100813 Nov 15 10:21 bigfile-gz9.gz
-rw-rw-r-- 1 alain alain  92904 Nov 15 09:32 bigfile.xz
-rw-r--r-- 1 alain alain    169 Nov 15 10:47 hosts.gz
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar -czf gzip.tar.gz bigfile bigfile2 bigfile3
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ ll -h
total 1.8M
drwxrwxr-x 2 alain alain 4.0K Nov 15 12:12 ./
drwxrwxr-x 5 alain alain 4.0K Nov 15 11:24 ../
-rw-rw-r-- 1 alain alain 284K Nov 15 10:28 bigfile
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile2
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile3
-rw-rw-r-- 1 alain alain 284K Nov 15 10:05 bigfile4
-rw-rw-r-- 1 alain alain 110K Nov 15 10:21 bigfile-gz1.gz
-rw-rw-r-- 1 alain alain  99K Nov 15 10:21 bigfile-gz9.gz
-rw-rw-r-- 1 alain alain  91K Nov 15 09:32 bigfile.xz
-rw-rw-r-- 1 alain alain 297K Nov 15 12:12 gzip.tar.gz
#--Example with 'j' and 'J' :
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar -cjf bzip2.tar.bz2 bigfile bigfile2 bigfile3
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar -cJf xz.tar.xz bigfile bigfile2 bigfile3
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ ls
bigfile   bigfile3  bigfile-gz1.gz  bigfile.xz     gzip.tar.gz  xz.tar.xz
bigfile2  bigfile4  bigfile-gz9.gz  bzip2.tar.bz2  hosts.gz

#--It is possible to append files to already existing uncompressed tar archives. Use the 'u' option to do this.If you attempt to add to a compressed archive, you will get an error.
#--Create Example plain.tar
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar cf plain.tar bigfile bigfile2 bigfile3

#--View the content of the Archive
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar tf plain.tar
bigfile
bigfile2
bigfile3
alain@ubuntuserver22:~/linux_essentials-3.1/compression$

#--Append the bigfile4 to plain.tar -- Use the '-u' option to do this
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar uf plain.tar bigfile4

#--View the content of the Archive
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar ft plain.tar
bigfile
bigfile2
bigfile3
bigfile4

#--2--0--Other example 'tar' with 'r' OPTION in order to append:
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar frv plain.tar GeneralZOD
GeneralZOD
#--2--1--view content 't'
alain@ubuntuserver22:~/linux_essentials-3.1/compression$ tar ft plain.tar
zod
bigfile
bigfile1
bigfile2
bigfile3
bigfile4
bigfile-gz1.gz
bigfile-gz9.gz
bigfile.xz
GeneralZOD

#--3--0--ther Test practice with 'tar'
alain@ubuntuserver22:~/linux_essentials-3.1$ mkdir compressionTest2
alain@ubuntuserver22:~/linux_essentials-3.1$ cat /etc/netplan/00-installer-config.yaml>./compressionTest2/Zod.txt
alain@ubuntuserver22:~/linux_essentials-3.1$ cat compressionTest2/Zod.txt
# This is the network config written by 'subiquity'
network:
    version: 2
    renderer: networkd
    ethernets:
        enp0s3:
            addresses:
                - 10.0.2.16/24
            nameservers:
                addresses: [8.8.8.8, 8.8.4.4]
            routes:
                - to: default
                  via: 10.0.2.2
				  
#--3--1--Compress the folder:
alain@ubuntuserver22:~/linux_essentials-3.1$ tar -zcvf MonTestTar.tar.gz compressionTest2/
compressionTest2/
compressionTest2/Zod.txt
alain@ubuntuserver22:~/linux_essentials-3.1$ tar -tf MonTestTar.tar.gz compressionTest2/
compressionTest2/
compressionTest2/Zod.txt
#--3--2--Decompress the folder in /tmp and OK!
alain@ubuntuserver22:~/linux_essentials-3.1$ tar -xvf MonTestTar.tar.gz -C /tmp
compressionTest2/
compressionTest2/Zod.txt
alain@ubuntuserver22:~/linux_essentials-3.1$ ls /tmp/
compressionTest2
snap-private-tmp



#--Managing ZIP files
#--Now we use zip to pack these files into a ZIP file:
alain@ubuntuserver22:~/linux_essentials-3.1$ mkdir zip
alain@ubuntuserver22:~/linux_essentials-3.1$ dir
archiving  compression  tar  zip
alain@ubuntuserver22:~/linux_essentials-3.1$ cd zip/
alain@ubuntuserver22:~/linux_essentials-3.1/zip$ mkdir dir
alain@ubuntuserver22:~/linux_essentials-3.1/zip$ touch dir/file{1..5}

#--!! the -r option causes zip to include a directory’s contents
alain@ubuntuserver22:~/linux_essentials-3.1/zip$ zip -r zipfile.zip dir
  adding: dir/ (stored 0%)
  adding: dir/file2 (stored 0%)
  adding: dir/file3 (stored 0%)
  adding: dir/file1 (stored 0%)
  adding: dir/file5 (stored 0%)
  adding: dir/file4 (stored 0%)

#--Finally, we unpack the ZIP file again:
alain@ubuntuserver22:~/linux_essentials-3.1/zip$ unzip zipfile.zip
Archive:  zipfile.zip
   creating: dir/
 extracting: dir/file2
 extracting: dir/file3
 extracting: dir/file1
 extracting: dir/file5
 extracting: dir/file4

alain@ubuntuserver22:~/linux_essentials-3.1/zip$ ls -R
.:
dir  zipfile.zip

./dir:
file1  file2  file3  file4  file5

#--EXAMPLE zip file using a compression level
#---#
#--(-0, -1, -2, -3, -4, -5, -6, -7, -8, -9)
#--Regulate the speed of compression using the specified digit #,where -0 indicates no compression (store all files), -1 indicates the fastest compression speed (less compression) and -9

alain@ubuntuserver22:~/linux_essentials-3.1/compression$ zip -3 GeneralZOD.zip GeneralZOD
  adding: GeneralZOD (deflated 63%)



#--3.2 Searching and Extracting Data from Files

#--Redirecting Standard Error

#--Example with a command that return an Error
alain@ubuntuserver22:~/3_2_redirect_error$ find /usr/ games 2> text-error-txt
alain@ubuntuserver22:~/3_2_redirect_error$ cat text-error-txt
find: ‘games’: No such file or directory

#--Example with a command that DO NOT return an Error: User ID start by 1000 
alain@ubuntuserver22:~/3_2_redirect_error$ sort /etc/passwd 2> text-error-txt
alain:x:1001:1001:,,,:/home/alain:/bin/bash
_apt:x:100:65534::/nonexistent:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
osboxes:x:1000:1000:osboxes.org:/home/osboxes:/bin/bash
...
# File result to be empty
alain@ubuntuserver22:~/3_2_redirect_error$ cat text-error-txt

#--Other example that return an error using >>
alain@ubuntuserver22:~/3_2_redirect_error$ ping 0.0. 2>>text-error-txt
alain@ubuntuserver22:~/3_2_redirect_error$ ping 0.0. 2>>text-error-txt
alain@ubuntuserver22:~/3_2_redirect_error$ ping 0.0. 2>>text-error-txt
alain@ubuntuserver22:~/3_2_redirect_error$ ping 0.0. 2>>text-error-txt
alain@ubuntuserver22:~/3_2_redirect_error$ cat text-error-txt
ping: 0.0.: Name or service not known
ping: 0.0.: Name or service not known
ping: 0.0.: Name or service not known
ping: 0.0.: Name or service not known
ping: 0.0.: Name or service not known

#--/dev/null. You can redirect any irrelevant information that you might not want displayed
alain@ubuntuserver22:~/3_2_redirect_error$ sort /etc 2> /dev/null

#--Other example
alain@ubuntuserver22:~/linux_essentials-3.1$ sort /etc/shadow
sort: cannot read: /etc/shadow: Permission denied

alain@ubuntuserver22:/tmp$ cat /home/alain/3_2_redirect_error/text-error-txt
...
sort: cannot read: /etc/shadow: Permission denied


#--This type of redirection is used to input data to a command, from a specified file instead of a keyboard
alain@ubuntuserver22:~/3_2_redirect_error$ cat < text
Hello World!

alain@ubuntuserver22:~/3_2_redirect_error$ grep H < text
Hello World!


alain@ubuntuserver22:~/3_2_redirect_error$ tr -d "o" < text
Hell Wrld!

#--combination of channel 1 and channel 2:
#--will overwrite the existing contents
alain@ubuntuserver22:~/3_2_redirect_error$ find /usr admin &> newfile
alain@ubuntuserver22:~/3_2_redirect_error$ cat newfile
#--add the new information at the end of the file
alain@ubuntuserver22:~/3_2_redirect_error$ find /etc/calendar &>> newfile
alain@ubuntuserver22:~/3_2_redirect_error$ cat newfile
..........
/usr/games/cowsay
find: ‘admin’: No such file or directory
find: ‘/etc/calendar’: No such file or directory

#--3-2-0--'cut' Command -- The cut command cuts specified fields from the input file by using the -f option, the 3rd field in our case. In order for the command to find the field, a delimiter needs to be specified as well with the -d option. In our case the delimiter will be the / character.

#--Example 3-2-1--with the third field
cut -f 3 -d "/" newfile

..........
lib
lib
lib
lib
games
games
games
find: ‘admin’: No such file or directory
calendar’: No such file or directory

#--Example 3-2-2--with the second field
alain@ubuntuserver22:~/3_2_redirect_error$ cut -f 2 -d "/" newfile
..........
usr
usr
usr
find: ‘admin’: No such file or directory
etc

#--Command Line Pipes example with 'more' and 'less' to scroll up and down a line at the time
alain@ubuntuserver22:~/3_2_redirect_error$ cat /etc/passwd | more
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync

#--Let’s take the ls -l command and try to count the number of words from the first 10 lines of the output. In order to do this, we will have to use the head command that by default displays the first 10 lines of a file and then count the words using the wc command:
alain@ubuntuserver22:~/3_2_redirect_error$ ls -l | head | wc -w
29
alain@ubuntuserver22:~/3_2_redirect_error$ ls
newfile  text  text-error-txt


#--Example 4-0-1 'tr' replace string -replace a by o

alain@ubuntuserver22:~/3_2_redirect_error$ echo | cat contents.txt | tr 'a' 'o'
totol 6.4M
4.0K -rw-rw-r-- 1 oloin oloin   13 Nov 15 15:12 text
4.0K -rw-rw-r-- 1 oloin oloin  290 Nov 16 10:17 text-error-txt
6.4M -rw-rw-r-- 1 oloin oloin 6.4M Nov 16 10:28 newfile
4.0K drwxr-x--- 7 oloin oloin 4.0K Nov 16 10:40 ../
   0 -rw-rw-r-- 1 oloin oloin    0 Nov 16 13:12 contents.txt
4.0K drwxrwxr-x 2 oloin oloin 4.0K Nov 16 13:12 ./

#--Example 4-0-1 'tr' replace string -replace a by n with a '<'
alain@ubuntuserver22:~/3_2_redirect_error$ tr -t 'a' 'n' < contents.txt
totnl 6.4M
4.0K -rw-rw-r-- 1 nlnin nlnin   13 Nov 15 15:12 text
4.0K -rw-rw-r-- 1 nlnin nlnin  290 Nov 16 10:17 text-error-txt
6.4M -rw-rw-r-- 1 nlnin nlnin 6.4M Nov 16 10:28 newfile
4.0K drwxr-x--- 7 nlnin nlnin 4.0K Nov 16 10:40 ../
   0 -rw-rw-r-- 1 nlnin nlnin    0 Nov 16 13:12 contents.txt
4.0K drwxrwxr-x 2 nlnin nlnin 4.0K Nov 16 13:12 ./


#--Example 4-0-2 'tr' delete string "-"
alain@ubuntuserver22:~/3_2_redirect_error$ tr -d "-" < contents.txt
total 6.4M
4.0K rwrwr 1 alain alain   13 Nov 15 15:12 text
4.0K rwrwr 1 alain alain  290 Nov 16 10:17 texterrortxt
6.4M rwrwr 1 alain alain 6.4M Nov 16 10:28 newfile
4.0K drwxrx 7 alain alain 4.0K Nov 16 10:40 ../
   0 rwrwr 1 alain alain    0 Nov 16 13:12 contents.txt
4.0K drwxrwxrx 2 alain alain 4.0K Nov 16 13:12 ./

#--Example 'wc' count occurence of char 'test' with find CMDS - several ways

alain@ubuntuserver22:~/3_2_redirect_error$ find /usr/share/ -name "*test*" | wc -l
61
alain@ubuntuserver22:~/3_2_redirect_error$ find /usr/share/ | grep test | wc -l
67

#--'wc and '<' return the word count and input it a new file field2.txt
alain@ubuntuserver22:~/3_2_redirect_error$ wc -w < contents.txt >>field2.txt
alain@ubuntuserver22:~/3_2_redirect_error$ cat field2.txt
62

#--'sort' 'head' Display the first 5 lines of the /etc/passwd file and sort the output reverse alphabetically
alain@ubuntuserver22:~/3_2_redirect_error$ head -n 5 /etc/passwd | sort -r
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin

#--count the number of characters of the last line of contents.txt. 'tail' 'wc'
alain@ubuntuserver22:~/3_2_redirect_error$ tail -n 1 contents.txt | wc -c
51

#-- Select the second field of the contents.txt file and redirect the standard output and error 
#--my way

output to another file called field1.txt.
alain@ubuntuserver22:~/3_2_redirect_error$ cut -f 2 -d " " contents.txt 1>stdout.txt
alain@ubuntuserver22:~/3_2_redirect_error$ cat stdout.txt
6.4M
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
drwxr-x---

#lecture way
drwxrwxr-x
alain@ubuntuserver22:~/3_2_redirect_error$ cut -f 2 -d " " contents.txt &>field1.txt
alain@ubuntuserver22:~/3_2_redirect_error$ cat field1.txt
6.4M
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
drwxr-x---

drwxrwxr-x


#--These values are always used for stdin, stdout, and stderr:
#--0: stdin
#--1: stdout
#--2: stderr

#--'sort' Replace all recurrent spaces within the alphabetically sorted contents.txt file with a single space.
#-- with 'sort' only
alain@ubuntuserver22:~/3_2_redirect_error$ sort contents.txt
   0 -rw-rw-r-- 1 alain alain    0 Nov 16 13:12 contents.txt
4.0K drwxrwxr-x 2 alain alain 4.0K Nov 16 13:12 ./
4.0K drwxr-x--- 7 alain alain 4.0K Nov 16 10:40 ../
4.0K -rw-rw-r-- 1 alain alain   13 Nov 15 15:12 text
4.0K -rw-rw-r-- 1 alain alain  290 Nov 16 10:17 text-error-txt
6.4M -rw-rw-r-- 1 alain alain 6.4M Nov 16 10:28 newfile
total 6.4M

#-- with 'sort' and 'tr'
alain@ubuntuserver22:~/3_2_redirect_error$ sort contents.txt | tr -s " "
 0 -rw-rw-r-- 1 alain alain 0 Nov 16 13:12 contents.txt
4.0K drwxrwxr-x 2 alain alain 4.0K Nov 16 13:12 ./
4.0K drwxr-x--- 7 alain alain 4.0K Nov 16 10:40 ../
4.0K -rw-rw-r-- 1 alain alain 13 Nov 15 15:12 text
4.0K -rw-rw-r-- 1 alain alain 290 Nov 16 10:17 text-error-txt
6.4M -rw-rw-r-- 1 alain alain 6.4M Nov 16 10:28 newfile
total 6.4M

#--3.2 Searching and Extracting Data from Files
#--exemple with the file text.txt
alain@ubuntuserver22:~/3_3_bash_script$ cat -n text.txt
     1  aaaa1
     2  abab2
     3  noone2
     4  class1
     5  alien2
     6  aaabbb1

# 'grep' with '^' previous character to 'aaaa' IS NOT 'a'
alain@ubuntuserver22:~/3_3_bash_script$ grep "^aaaa" text.txt
aaaa1

#-- 'grep' and [] searches for sets of characters that contain any of the characters between the brackets.
alain@ubuntuserver22:~/3_3_bash_script$ grep "[ab]" text.txt
aaaa1
abab2
class1
alien2
aaabbb1
alain@ubuntuserver22:~/3_3_bash_script$ grep "[bc]" text.txt
abab2
class1
aaabbb1
alain@ubuntuserver22:~/3_3_bash_script$


#-- 'grep -E' '.+'  
alain@ubuntuserver22:~/3_3_bash_script$ grep -E "ab.+" text.txt
abab2
aaabbb1


#--
alain@ubuntuserver22:~/3_3_bash_script$ head /usr/share/bash-completion/completions/hunspell
# hunspell(1) completion                                   -*- shell-script -*-

_hunspell()
{
    local cur prev words cword
    _init_completion || return

    case $prev in
        --help | --version | -vv | -[hPv])
            return


#--1. 'grep' All lines containing the word 'et' anywhere on the line.
alain@ubuntuserver22:~$ grep "et" /usr/share/bash-completion/completions/hunspell
# hunspell(1) completion                                   -*- shell-script -*-
    _init_completion || return
            return
            local IFS=$' \t\n' reset=$(shopt -p nullglob)
            $reset
            return
            _xfunc iconv _iconv_charsets
            return
            return
        return
    complete -F _hunspell hunspell
# ex: filetype=sh

			
#-- 'grep' '-v' All lines that do not contain any of the following characters: "sawgtfixk"
alain@ubuntuserver22:~$ grep -v "[sawgtfixk]" /usr/share/bash-completion/completions/hunspell

{

            ;;
        -d)
            IFS=$'\n'
            ;;
            ;;
        -p)
            ;;


} &&

#--'grep' All lines that start with any 3 letters and the word dig
alain@ubuntuserver22:~$ grep "^...dig" /usr/share/bash-completion/completions/hunspell

#-- 'grep' All lines that end with at least one 'r'.
alain@ubuntuserver22:~$ grep -E "r+$" /usr/share/bash-completion/completions/hunspell
            _filedir
    _filedir

#-- 'grep' All lines that end with at least one 'n'.
alain@ubuntuserver22:~$ grep -E "n+$" /usr/share/bash-completion/completions/hunspell
    _init_completion || return
    case $prev in
            return
            return
            return
            return
    if [[ $cur == -* ]]; then
        return


#-- All lines that contain one of the following words: file , prev or return
alain@ubuntuserver22:~$ grep -E "file|prev|return" /usr/share/bash-completion/completions/hunspell
    local cur prev words cword
    _init_completion || return
    case $prev in
            return
            return
            return
            _filedir
            return
        return
    _filedir
# ex: filetype=sh


#-- Number of lines that start with one or no c followed by the string ati ( i dont get it)
grep -cE "^c?ati" /usr/share/hunspell/en_US.dic

alain@ubuntuserver22:~$ grep -cE "?c" /usr/share/bash-completion/completions/hunspell
15

#--3.3 Turning Commands into a Script - 1

alain@ubuntuserver22:~/3_3_bash_script$ cat bash0.sh
#!/bin/bash
# This is our first comment. It is also good practice to document all scripts.
echo "Hello World!"
alain@ubuntuserver22:~/3_3_bash_script$ which bash
/usr/bin/bash


#--3.3 Turning Commands into a Script

#--Arguments
alain@ubuntuserver22:~/3_3_bash_script$ cat bash0.sh
#!/bin/bash
# This is our first comment. It is also good practice to document all scripts.
username2="Ekaterina"
username3et4="Rafael et Adela"
echo "Hello World! $username2 $username3et4 and $USER"
echo 'Hello World! $username2 $username3et4 and $USER'

alain@ubuntuserver22:~/3_3_bash_script$ ./bash0.sh
Hello World! Ekaterina Rafael et Adela and alain
Hello World! $username2 $username3et4 and $USER




#--Returning the Number of Arguments
alain@ubuntuserver22:~/3_3_bash_script$ cat bash3.sh
#!/bin/bash
# This is our first comment. It is also good practice to comment all scripts.
username=$1
username2=$2
echo "Hello $username!"
echo "and $username2!"
echo "Number of arguments: $#."

alain@ubuntuserver22:~/3_3_bash_script$ ./bash3.sh Carol Davina
Hello Carol!
and Davina!
Number of arguments: 2.


alain@ubuntuserver22:~/3_3_bash_script$ cat bash1.sh
#!/bin/bash
# A simple script to greet a single user.
if [ $# -eq 1 ]
then
username=$1
echo "Hello $username!"
else
echo "Please enter only one argument."
fi
echo "Number of arguments: $#."

alain@ubuntuserver22:~/3_3_bash_script$ bash bash1.sh 4
Hello 4!
Number of arguments: 1.

#--Conditional Logic
#--We would like to know if the value of $# is 1.

alain@ubuntuserver22:~/3_3_bash_script$ cat bash4.sh
#!/bin/bash
# A simple script to greet a single user.
if [ $# -eq 1 ]
then
username=$1
echo "Hello $username!"
else
echo "Please enter only one argument."
fi
echo "Number of arguments: $#."



alain@ubuntuserver22:~/3_3_bash_script$ ./bash4.sh Danita
Hello Danita!
Number of arguments: 1.

#--Exercice -- The lines marked with a > contain errors. Fix the errors.
> /!bin/bash
> fruit1 = Apples
> fruit2 = Oranges
if [ $1 -lt $# ]
then
echo "This is like comparing $fruit1 and $fruit2!"
> elif [$1 -gt $2 ]
then
> echo '$fruit1 win!'
else
> echo "Fruit2 win!"
> done

#!/bin/bash
fruit1="Apples"
fruit2="Oranges"
if [ $1 -lt $# ]
then
echo "This is like comparing $fruit1 and $fruit2!"
elif [$1 -gt $2 ]
then
echo '$fruit1 win!'
else
echo "$fruit2 win!"

#--Write a simple script that will check if exactly two arguments are passed

alain@ubuntuserver22:~/3_3_bash_script$ cat bash7.sh
#!/bin/bash
number=$1
number=$2
if [ $# == 2 ]
then
echo "True!"
else
echo "False!"
fi
echo "Count of arguments $#"
echo "$2 and $1"


#--write a short script that accepts an argument. If an argument is passed, check if that argument matches the name of the current directory. If so, print yes. Otherwise, print no.

#!/bin/bash
echo $PWD
number=$1
if [ $# == 1 ]
then
echo "True One Argument!"
else
echo "False No Argument entered!"
fi

if [ $1 == $PWD ]
then
echo "true Match current dirname $PWD"
else
echo "False No match with current dir entered! $PWD"
fi

#--Correction from tuto
#!/bin/bash
if [ "$1" == "$PWD" ]
then
echo "yes"
else
echo "no"
fi


#--3.3 Turning Commands into a Script -  2

#--Exit Codes
alain@ubuntuserver22:~/3_3_bash_script$ cat -n c_bash5.sh
     1  #!/bin/bash
     2  # A simple script to greet a single user.
     3  if [ $# -eq 1 ]
     4  then
     5  username=$1
     6  echo "Hello $username!"
     7  exit 0
     8  else
     9  echo "Please enter only one argument."
    10  exit 1
    11  fi
    12  echo "Number of arguments: $#."

#-- Notice that the echo command on line 15 was ignored entirely. Using exit will end the script immediately, so this line is never encountered
alain@ubuntuserver22:~/3_3_bash_script$ ./bash5.sh $USER
Hello alain!
Number of arguments: 1.
alain@ubuntuserver22:~/3_3_bash_script$ echo $?
0



#--Handling Many Arguments


#--There are two built-in variables which contain all arguments passed to the script: $@ and $*.
alain@ubuntuserver22:~/3_3_bash_script$ ./friendly2.sh
Please enter at least one user to greet.
#--Thanks to $@ Bash will parse the arguments, and separate each argument when it encounters a space between them
alain@ubuntuserver22:~/3_3_bash_script$ ./friendly2.sh Carol Denry Duizom
Hello Carol Denry Duizom!
alain@ubuntuserver22:~/3_3_bash_script$


#--For Loops example with a bash forLoops.sh

alain@ubuntuserver22:~/3_3_bash_script$ cat forLoops.sh
#!/bin/bash

FILES="/home/alain /tmp /var"

for i in $FILES
do
        ls -lh $i
done


alain@ubuntuserver22:~/3_3_bash_script$ ./forLoops.sh
total 20K
drwxrwxr-x 2 alain alain 4.0K Nov 16 14:15  3_2_redirect_error
drwxrwxr-x 2 alain alain 4.0K Nov 22 10:37  3_3_bash_script
drwxrwxr-x 3 alain alain 4.0K Nov 13 15:39  Documents
drwxrwxr-x 7 alain alain 4.0K Nov 16 09:57  linux_essentials-3.1
drwxrwxr-x 3 alain alain 4.0K Nov 13 16:52 'this is a test'
total 16K
drwx------ 3 root root 4.0K Nov 22 09:34 snap-private-tmp
drwx------ 3 root root 4.0K Nov 22 09:34 systemd-private-7479714748174ad19e8d3b4f957b995f-ModemManager.service-zBxKN5
drwx------ 3 root root 4.0K Nov 22 09:34 systemd-private-7479714748174ad19e8d3b4f957b995f-systemd-logind.service-ZtsUk2
drwx------ 3 root root 4.0K Nov 22 09:34 systemd-private-7479714748174ad19e8d3b4f957b995f-systemd-resolved.service-csjJNa
total 44K
drwxr-xr-x  2 root root   4.0K Nov 16 09:24 backups
drwxr-xr-x 13 root root   4.0K Oct 31 13:50 cache
drwxrwxrwt  2 root root   4.0K Nov 13 11:15 crash
drwxr-xr-x 40 root root   4.0K Oct 31 11:43 lib
drwxrwsr-x  2 root staff  4.0K Apr 18  2022 local
lrwxrwxrwx  1 root root      9 Apr 21  2022 lock -> /run/lock
drwxrwxr-x  9 root syslog 4.0K Nov 22 09:34 log
drwxrwsr-x  2 root mail   4.0K Apr 21  2022 mail
drwxr-xr-x  2 root root   4.0K Apr 21  2022 opt
lrwxrwxrwx  1 root root      4 Apr 21  2022 run -> /run
drwxr-xr-x  5 root root   4.0K Apr 21  2022 snap
drwxr-xr-x  4 root root   4.0K Apr 21  2022 spool
drwxrwxrwt  5 root root   4.0K Nov 22 09:54 tmp


#--example 2
alain@ubuntuserver22:~/3_3_bash_script$ cat friendly3.sh
#!/bin/bash

# a friendly script to greet users

if [ $# -eq 0 ]
 then
 echo "Please enter at least one user to greet."
 exit 1
else
 echo "Hello $1"
 shift
 for username in $@
 do
         echo -n " , and $username"
 done
 echo "!"
 exit 0
fi

#--Using -n with echo will suppress the newline after printing. This means that all echoes will print to the same line, and the newline will be printed only after the !` 
alain@ubuntuserver22:~/3_3_bash_script$ ./friendly3.sh
Please enter at least one user to greet.
alain@ubuntuserver22:~/3_3_bash_script$ ./friendly3.sh Ubuntu Debian LinuxMint
Hello Ubuntu
 , and Debian , and LinuxMint!
 
#--The shift command will remove the first element of our array, here what happens if we remove it.
alain@ubuntuserver22:~/3_3_bash_script$ ./friendly3.sh Ubuntu Debian LinuxMint Xubuntu OpenBSD
Hello Ubuntu
 , and Ubuntu , and Debian , and LinuxMint , and Xubuntu , and OpenBSD!

#--Using Regular Expressions to Perform Error Checking
#--grep is returning exit codes based on whether there was a match or not. A positive match returns 0, and a no match returns a 1
alain@ubuntuserver22:~/3_3_bash_script$ cat friendly4ForLoopRegExp.sh
#!/bin/bash

# a friendly script to greet users

if [ $# -eq 0 ]
 then
 echo "Please enter at least one user to greet."
 exit 1
else
 for username in $@
 do
        echo $username | grep "^[A-Za-z]*$" > /dev/null
        if [ $? -eq 1 ]
        then
        echo "ERROR: Names must only contains letters."
        exit 2
        else
                echo "Hello $username!"
         fi
 done
 exit 0
fi


alain@ubuntuserver22:~/3_3_bash_script$ ./friendly4ForLoopRegExp.sh Toto Wil Joe Luke Candy Aud Lorena Zineb
Hello Toto!
Hello Wil!
Hello Joe!
Hello Luke!
Hello Candy!
Hello Aud!
Hello Lorena!
Hello Zineb!

alain@ubuntuserver22:~/3_3_bash_script$ ./friendly4ForLoopRegExp.sh
Please enter at least one user to greet.


#--4.1 Choosing an Operating System

#-- version of the Linux kernel that you are running by reading the kernel release:
alain@ubuntuserver22:~/3_3_bash_script$ uname -r
5.15.0-88-generic
#--reported operating system:
alain@ubuntuserver22:~/3_3_bash_script$ uname -s
Linux
#--all from Ubuntu Server
alain@ubuntuserver22:~$ uname -a
Linux ubuntuserver22 5.15.0-88-generic #98-Ubuntu SMP Mon Oct 2 15:18:56 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux

#--all from Debian
alain@debianvm11:~$ uname -a
Linux debianvm11 5.10.0-8-amd64 #1 SMP Debian 5.10.46-4 (2021-08-03) x86_64 GNU/Linux


#--all from Debian
alain@ubuntuserver22:/$ ls --version
ls (GNU coreutils) 8.32
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <https://gnu.org/licenses/gpl.html>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Richard M. Stallman and David MacKenzie.





#--4.2 Understanding Computer Hardware
#--system memory -m to use megabytes
alain@debianvm11:~$ free -m
               total        used        free      shared  buff/cache   available
Mem:            1982          97        1716          12         169        1733
Swap:           8582           0        8582

alain@ubuntuserver22:~$ free -m
               total        used        free      shared  buff/cache   available
Mem:            1964         178        1062           1         722        1625
Swap:          13141           0       13141

#--CPU (Central Processing Unit).
#--processes the binary commands specified by software

#--GPU (Graphical Processing Unit)
#--However, in addition to a CPU, modern computers often include other task specific processors.


#--i386 References the 32-bit instruction set associated with the Intel 80386.
#--x86 Typically references the 32-bit instruction sets associated with successors to the 80386 such as 80486, 80586, and Pentium.
#--x64 / x86-64 References processors that support both the 32-bit and 64-bit instructions of the x86 family.
#--AMD A reference to x86 support by AMD processors.
#--AMD64 A reference to x64 support by AMD processors.
#--ARM: References a Reduced Instruction Set Computer (RISC) CPU that is not based on the x86 instruction set. Commonly used by embedded, mobile, tablet, and battery operated devices. A version of Linux for ARM is used by the Raspberry Pi.



#--A more general result can be obtained with the command lscpu. Output from a Raspberry Pi B+:

alain@ubuntuserver22:~$ lscpu
Architecture:            x86_64
  CPU op-mode(s):        32-bit, 64-bit
  Address sizes:         39 bits physical, 48 bits virtual
  Byte Order:            Little Endian
CPU(s):                  1
  On-line CPU(s) list:   0
Vendor ID:               GenuineIntel
  Model name:            11th Gen Intel(R) Core(TM) i5-1145G7 @ 2.60GHz
    CPU family:          6
    Model:               140
    Thread(s) per core:  1
    Core(s) per socket:  1
    Socket(s):           1
    Stepping:            1
    BogoMIPS:            5222.39
    Flags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse
                          sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology nonstop_tsc cpuid tsc_kno
                         wn_freq pni pclmulqdq monitor ssse3 cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt aes xsave av
                         x rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single fsgsbase bmi1 avx2 bmi2 invpcid
                          rdseed clflushopt md_clear flush_l1d arch_capabilities
Virtualization features:
  Hypervisor vendor:     KVM
  Virtualization type:   full
Caches (sum of all):
  L1d:                   48 KiB (1 instance)
  L1i:                   32 KiB (1 instance)
  L2:                    1.3 MiB (1 instance)
  L3:                    8 MiB (1 instance)
NUMA:
  NUMA node(s):          1
  NUMA node0 CPU(s):     0
Vulnerabilities:
  Gather data sampling:  Unknown: Dependent on hypervisor status
  Itlb multihit:         Not affected
  L1tf:                  Not affected
  Mds:                   Not affected
  Meltdown:              Not affected
  Mmio stale data:       Not affected
  Retbleed:              Not affected
  Spec rstack overflow:  Not affected
  Spec store bypass:     Vulnerable
  Spectre v1:            Mitigation; usercopy/swapgs barriers and __user pointer sanitization
  Spectre v2:            Mitigation; Retpolines, STIBP disabled, RSB filling, PBRSB-eIBRS Not affected
  Srbds:                 Not affected
  Tsx async abort:       Not affected
alain@ubuntuserver22:~$ ll /proc/cpuinfo
-r--r--r-- 1 root root 0 Nov 27 10:31 /proc/cpuinfo

#--The file /proc/cpuinfo contains detailed information about a system’s processor. Unfortunately the details are not friendly to general users. 


alain@ubuntuserver22:~$ cat /proc/cpuinfo
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 140
model name      : 11th Gen Intel(R) Core(TM) i5-1145G7 @ 2.60GHz
stepping        : 1
cpu MHz         : 2611.198
cache size      : 8192 KB
physical id     : 0
siblings        : 1
core id         : 0
cpu cores       : 1
apicid          : 0
initial apicid  : 0
fpu             : yes
fpu_exception   : yes
cpuid level     : 22
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology nonstop_tsc cpuid tsc_known_freq pni pclmulqdq monitor ssse3 cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt aes xsave avx rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single fsgsbase bmi1 avx2 bmi2 invpcid rdseed clflushopt md_clear flush_l1d arch_capabilities
bugs            : spectre_v1 spectre_v2 spec_store_bypass swapgs gds
bogomips        : 5222.39
clflush size    : 64
cache_alignment : 64
address sizes   : 39 bits physical, 48 bits virtual
power management:


#--Same Manipulation on Debian
alain@debianvm11:~$ lspci
00:00.0 Host bridge: Intel Corporation 440FX - 82441FX PMC [Natoma] (rev 02)
00:01.0 ISA bridge: Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II]
00:01.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01)
00:02.0 VGA compatible controller: VMware SVGA II Adapter
00:03.0 Ethernet controller: Intel Corporation 82540EM Gigabit Ethernet Controll                                                                                                                                                             er (rev 02)
00:04.0 System peripheral: InnoTek Systemberatung GmbH VirtualBox Guest Service
00:05.0 Multimedia audio controller: Intel Corporation 82801AA AC'97 Audio Contr                                                                                                                                                             oller (rev 01)
00:06.0 USB controller: Apple Inc. KeyLargo/Intrepid USB
00:07.0 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 08)
00:0b.0 USB controller: Intel Corporation 82801FB/FBM/FR/FW/FRW (ICH6 Family) US                                                                                                                                                             B2 EHCI Controller
00:0d.0 SATA controller: Intel Corporation 82801HM/HEM (ICH8M/ICH8M-E) SATA Cont                                                                                                                                                             roller [AHCI mode] (rev 02)
alain@debianvm11:~$ cat /proc/cpuinfo
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 140
model name      : 11th Gen Intel(R) Core(TM) i5-1145G7 @ 2.60GHz
stepping        : 1
cpu MHz         : 2611.198
cache size      : 8192 KB
physical id     : 0
siblings        : 1
core id         : 0
cpu cores       : 1
apicid          : 0
initial apicid  : 0
fpu             : yes
fpu_exception   : yes
cpuid level     : 22
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology nonstop_tsc cpuid tsc_known_freq pni pclmulqdq monitor ssse3 cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt aes xsave avx rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single fsgsbase bmi1 avx2 bmi2 invpcid rdseed clflushopt md_clear flush_l1d arch_capabilities
bugs            : spectre_v1 spectre_v2 spec_store_bypass swapgs
bogomips        : 5222.39
clflush size    : 64
cache_alignment : 64
address sizes   : 39 bits physical, 48 bits virtual
power management:


#--Hard Disk Drives (HDDs) and Solid State Drives (SSDs) are the most common form of storage device
#-- >> HDD -- Hard disk drive stores information on one or more rigid physical disks.
#-- >> SDD -- SSDs store information in microchips so there are no moving parts

#--HDD capacity is scaling physical components while SSD capacity depends on the number of microchips.  To read or write, an HDD must wait for a location on a disk to rotate to a known location while SSDs are random access. SSD access speeds are typically 3 to 5 times faster. It is also more expensive in money. Since they have no moving parts SSDs consume less power and are more reliable than HDDs.

#--SCSI: Modern systems use SCSI (Small Computer System Interface) or SATA (Serial AT Attachment) to connect with storage devices AND are supported by the appropriate connector on the motherboard.

#--RAID (Redundant Array of Independent Disks) is array consists of multiple physical devices containing duplicate copies of information when one disk fail.



#--LVM : Logical Volume Manager (LVM) is a software capability that allows administrators to combine individual disks and disk partitions and treat them as if they are a single drive. For example I can merge 3 physicals drive in 2 logical drives. Then I can apply a filesystem on each of LVM.

#--System on a Chip (SoC) -- Phones, tablets, and other portable devices are often based on SoC technology-- power, performance, space, and reliability advantages over motherboard configurations by packaging processors

#--USB (Universal Serial Bus)

#--HDMI : High-Definition Multimedia Interface

#--Device files are found in the /dev directory and identify physical devices, device access, and supported drivers
#--systems using SCSI or SATA based storage devices the specification filename starts with the prefix sd :
#--The prefix is followed by a letter such as a or b indicating a physical device

alain@ubuntuserver22:~$ ls /dev/sd*
/dev/sda  /dev/sda1  /dev/sda2  /dev/sda3  /dev/sda4  /dev/sda5

alain@debianvm11:/dev$ ls sd*
sda  sda1  sda2  sda3  sda4

#-- /dev/sda would reference the entire first storage device
#--/dev/sda3 would reference partition 3 in the first storage device
#--Each system device should have an entry in /dev


#--Example on Ubuntu Server
alain@ubuntuserver22:~$ lsblk -f
NAME   FSTYPE   FSVER           LABEL           UUID                                 FSAVAIL FSUSE% MOUNTPOINTS
loop0  squashfs 4.0                                                                        0   100% /snap/snapd/20290
loop1  squashfs 4.0                                                                        0   100% /snap/lxd/24322
loop2  squashfs 4.0                                                                        0   100% /snap/core20/1405
loop3  squashfs 4.0                                                                        0   100% /snap/lxd/22923
loop4  squashfs 4.0                                                                        0   100% /snap/core20/2015
sda
├─sda1
├─sda2 ext4     1.0                             67c8c573-e0dc-4770-9002-8be1a8565e3f  211.7G     3% /
├─sda3 ext4     1.0                             2fd6f408-4bb1-4360-9709-68dbbd0017bf       0    92% /boot
├─sda4 swap     1                               e837e681-8915-4ab1-a525-5cbf1fd18e06                [SWAP]
└─sda5 ext4     1.0                             cf826a7f-483b-43ef-b7e1-137362ab74e2  236.9G     0% /home
sr0    iso9660  Joliet Extensio VBox_GAs_7.0.10 2023-07-12-19-24-46-08


#--Example on Debian Server
alain@debianvm11:/dev$ lsblk -f
NAME   FSTYPE FSVER LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINT
sda
├─sda1 ext4   1.0         371ab9af-cb03-4c8b-a2ac-17a083f20af1  203.6G     1% /
├─sda2 ext4   1.0         e2d2ee69-2feb-4301-9ef9-c48ae677953c  811.9M     5% /boot
├─sda3 swap   1           9f7d2adc-2e6e-455b-878b-a4c003b34668                [SWAP]
└─sda4 ext4   1.0         8f0559f0-38c0-4e54-93a0-00474ad084a5  251.2G     0% /home


#-- While it is beyond the scope of this lesson to cover the contents of the /dev directory it is informative to look at the entry for a storage device. Device files for SD cards typically use mmcblk as a prefix:

#--The mmc sub-system in the Linux kernel registers device nodes of the format mmcblkXpY.
#--Each mmc device registered within the Linux kernel receives it own mmc device number X.
#--Each partition on a particular device receives it own number Y
#--Normal file I/O can be performed after mounting a device node pointing to a partition.
#--Also note that unless a valid partition table is present on the /dev/mmcblkX device, there will be no subsequent /dev/mmcblkXpY nodes on the system.
#--by convention that the mmcblk would be an SD memory card.

#-- Processors : “processor” implies that something is being processed. In computers most of that processing is dealing with electrical signals. Typically those signals are treated as having one of the binary values 1 or 0. Perhaps the most recognizable additional processor is a GPU (Graphical Processing Unit). Thus, while a CPU is a processor, not all processors are CPUs.

#-- 4.3 Where Data is Stored (page 283)

#--Linux Filesystem Hierarchy Standard (FHS). https://refspecs.linuxfoundation.org/fhs.shtml

#--Where Binary Files are Stored:
#-- / the first tier (/) includes programs that can be necessary in single-user mode, 
#-- /usr the second tier (/usr) contains most multi-user programs and
#-- /usr/local the third tier (/usr/local) is used to store software that is not provided by the distribution andhas been compiled locally

#--Recently some distributions started to replace /bin and /sbin with symbolic links to /usr/bin and /usr/sbin.

#--It contains essential binaries for system administration such as parted or ip.
alain@ubuntuserver22:/$ ll /sbin
lrwxrwxrwx 1 root root 8 Apr 21  2022 /sbin -> usr/sbin/

#--It contains essential binaries for all users such as ls, mv, or mkdir
alain@ubuntuserver22:/$ ll /bin
lrwxrwxrwx 1 root root 7 Apr 21  2022 /bin -> usr/bin/

#--It stores binaries for system administration such as deluser, or groupadd.
alain@ubuntuserver22:/$ ls /usr/sbin/
aa-remove-unknown      fsck.msdos                   mdmon                  swapoff
.....

#--It includes most executable files — such as free, pstree, sudo or man — that can be used by all users.
alain@ubuntuserver22:/$ ls /usr/bin/
'['                                   ipcs                               sg_emc_trespass
.....

#--It is used to store locally installed programs for system administration that are not managed by the system’s package manager
alain@ubuntuserver22:/$ ls /usr/local/sbin/
unminimize

#-- /usr/local/bin
#--It serves the same purpose as /usr/local/sbin but for regular user programs
alain@ubuntuserver22:/$ ls /usr/local/bin/
alain@ubuntuserver22:/$

#--The /optsudos directory is sometimes used to store optional third-party applications.
alain@ubuntuserver22:/$ ls /opt/
VBoxGuestAdditions-7.0.10

#--Apart from these directories, regular users can have their own programs in either:
#--• /home/$USER/bin
#--• /home/$USER/.local/bin
#-- Here this is not the case
alain@ubuntuserver22:/$ cd /home/$USER/

#-- We can find the location of programs with the which command: See the $PATH lessons.
alain@ubuntuserver22:~$ which git
/usr/bin/git


#-- We can find command brief explanation with 'whatis'
alain@ubuntuserver22:/etc$ whatis
whatis what?
alain@ubuntuserver22:/etc$ whatis find
find (1)             - search for files in a directory hierarchy
alain@ubuntuserver22:/etc$ whatis man
man (1)              - an interface to the system reference manuals
man (7)              - macros to format man pages
alain@ubuntuserver22:/etc$ whatis grep
grep (1)             - print lines that match patterns
alain@ubuntuserver22:/etc$ whatis cut
cut (1)              - remove sections from each line of files
alain@ubuntuserver22:/etc$ whatis sed
sed (1)              - stream editor for filtering and transforming text


#--Where Configuration Files are Stored : Unix there was a folder for each type of data, such as /bin for binaries and /boot for the kernel(s)
#--/etc (meaning et cetera) was created as a catch-all directory to store any files that did not belong in the other categories
alain@ubuntuserver22:~$ ls /etc/
adduser.conf            dhcp             kernel          mtab                 python3       sudo.conf
alternatives            dpkg             landscape       multipath            python3.10    sudoers
apparmor                e2scrub.conf     ldap            multipath.conf       rc0.d         sudoers.d
apparmor.d              emacs            ld.so.cache     nanorc               rc1.d         sudo_logsrvd.conf
apport                  environment      ld.so.conf      needrestart          rc2.d         sysctl.conf
apt                     ethertypes       ld.so.conf.d    netconfig            rc3.d         sysctl.d
bash.bashrc             fstab            legal           netplan              rc4.d         systemd
bash_completion         fuse.conf        libaudit.conf   network              rc5.d         terminfo
bash_completion.d       fwupd            libblockdev     networkd-dispatcher  rc6.d         thermald
.....

#--Debian derivatives — such an approach has been applied to the list of reliable sources read by the package management tool apt
alain@ubuntuserver22:~$ ls /etc/apt/
apt.conf.d   keyrings       sources.list             sources.list.d
auth.conf.d  preferences.d  sources.list.curtin.old  trusted.gpg.d


#--/etc contains the following config file: group, hostname, hosts, passwd, profile, shadow, nanorc (txt editor), Files ending in .conf: ex: resolv.conf, sysctl.conf

#-- Tip for printing all local variable 'printenv'
alain@ubuntuserver22:~$ printenv
SHELL=/bin/bash
PWD=/home/alain
LOGNAME=alain
XDG_SESSION_TYPE=tty
MOTD_SHOWN=pam
HOME=/home/alain
LANG=en_US.UTF-8
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
SSH_CONNECTION=10.0.2.2 54299 10.0.2.16 22
LESSCLOSE=/usr/bin/lesspipe %s %s
XDG_SESSION_CLASS=user
TERM=xterm
LESSOPEN=| /usr/bin/lesspipe %s
USER=alain
SHLVL=1
XDG_SESSION_ID=1
XDG_RUNTIME_DIR=/run/user/1001
SSH_CLIENT=10.0.2.2 54299 22
XDG_DATA_DIRS=/usr/local/share:/usr/share:/var/lib/snapd/desktop
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1001/bus
SSH_TTY=/dev/pts/0
_=/usr/bin/printenv
OLDPWD=/home/alain

#-- Tip for printing all local variable '$' pressing TAB key twice ; equivalent 'printenv'
alain@ubuntuserver22:~$ $
$_                         $DBUS_SESSION_BUS_ADDRESS  $LINES                     $SHELLOPTS
$_backup_glob              $DIRSTACK                  $LOGNAME                   $SHLVL
$BASH                      $EPOCHREALTIME             $LS_COLORS                 $snap_bin_path
$BASH_ALIASES              $EPOCHSECONDS              $MACHTYPE                  $snap_xdg_path
$BASH_ARGC                 $EUID                      $MAILCHECK                 $SRANDOM
$BASH_ARGV                 $__git_printf_supports_v   $MOTD_SHOWN                $SSH_CLIENT
$BASH_ARGV0                $GROUPS                    $OLDPWD                    $SSH_CONNECTION
$BASH_CMDS                 $HISTCMD                   $OPTERR                    $SSH_TTY
$BASH_COMMAND              $HISTCONTROL               $OPTIND                    $TERM
$BASH_COMPLETION_VERSINFO  $HISTFILE                  $OSTYPE                    $UID
$BASH_LINENO               $HISTFILESIZE              $PATH                      $USER
$BASHOPTS                  $HISTSIZE                  $PIPESTATUS                $XDG_DATA_DIRS
$BASHPID                   $HOME                      $PPID                      $XDG_RUNTIME_DIR
$BASH_REMATCH              $HOSTNAME                  $PS1                       $XDG_SESSION_CLASS
$BASH_SOURCE               $HOSTTYPE                  $PS2                       $XDG_SESSION_ID
$BASH_SUBSHELL             $IFS                       $PS4                       $XDG_SESSION_TYPE
$BASH_VERSINFO             $LANG                      $PWD                       $_xspecs
$BASH_VERSION              $LESSCLOSE                 $RANDOM
$COLUMNS                   $LESSOPEN                  $SECONDS
$COMP_WORDBREAKS           $LINENO                    $SHELL


#--Encrypted file for user passwords
alain@ubuntuserver22:~$ sudo cat /etc/shadow-
[sudo] password for alain:
root:*:19103:0:99999:7:::
daemon:*:19103:0:99999:7:::
bin:*:19103:0:99999:7:::
sys:*:19103:0:99999:7:::


alain@ubuntuserver22:~$ sudo cat /etc/group
root:x:0:
daemon:x:1:
bin:x:2:
sys:x:3:
adm:x:4:syslog,osboxes


#--Some programs with a unique config file (*.conf or otherwise) have evolved to have a dedicated *.d directory which help build modular, more robust configurations. For example, to configure logrotate, you will find logrotate.conf, but also the logrotate.d directories
alain@ubuntuserver22:~$ cat /etc/logrotate.d/alternatives
/var/log/alternatives.log {
        monthly
        rotate 12
        compress
        delaycompress
        missingok
        notifempty
        create 644 root root
}



#-- Likewise, packages can add specific tasks by placing files in the /etc/cron.d directory instead of modifying /etc/crontab

alain@ubuntuserver22:~$ cat /etc/cron.d/
e2scrub_all   .placeholder
alain@ubuntuserver22:~$ cat /etc/cron.d/e2scrub_all
30 3 * * 0 root test -e /run/systemd/system || SERVICE_MODE=1 /usr/lib/x86_64-linux-gnu/e2fsprogs/e2scrub_all_cron
10 3 * * * root test -e /run/systemd/system || SERVICE_MODE=1 /sbin/e2scrub_all -A -r


#-- Configuration Files in HOME (Dotfiles)

alain@ubuntuserver22:~$ ll -la /home/alain/.b*
-rw------- 1 alain alain 30028 Nov 27 16:16 /home/alain/.bash_history
-rw-r--r-- 1 alain alain   220 Oct 31 10:42 /home/alain/.bash_logout
-rw-r--r-- 1 alain alain  3771 Oct 31 10:42 /home/alain/.bashrc


#--.bash_history, It stores the command line history.
alain@ubuntuserver22:~$ head -n 10 /home/alain/.bash_history
sudo su
logout
sudo apt update
sudo loadkeys es
....
sudo mkdir /media/cdrom
alain@ubuntuserver22:~$ tail -n 10 /home/alain/.bash_history
....
ls /etc/apt/sources*
sudo poweroff

#-- 'history' various possibilities:
#-- 'history' show last 4 commands
alain@ubuntuserver22:~/5_3_play_permission$ history 4
 2053  ls
 2054  history 12
 2055  ls -l
 2056  history 4

#-- 'history' execute the command which was in the 2050 th position
alain@ubuntuserver22:~/5_3_play_permission$ !2050
ls -l
total 4
drwxrwxr-x 2 alain alain 4096 Dec 12 09:13 Another_Directory
-rwxrwxr-x 1 alain alain    0 Dec 12 09:34 text2.txt
-rwxrwxrwx 1 alain alain    0 Dec 12 09:15 text.txt

#-- 'history' show the command ran which was in the 2050 th position
alain@ubuntuserver22:~/5_3_play_permission$ !2050:p
ls -l

#--find the 'history' file
[root@localhost oracle]# echo $HISTFILE
/root/.bash_history

#--delete a record 'ex:4' in the 'history' file
[root@localhost oracle]# history -d 4

#-- Bash’s initialization script for non-login shells.
alain@ubuntuserver22:~$ head -n 10 /home/alain/.bashrc
# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples

# If not running interactively, don't do anything
case $- in
    *i*) ;;
      *) return;;
esac

#--Bash’s initialization script for login shells.
alain@ubuntuserver22:~$ head -n 10 /home/alain/.profile
# ~/.profile: executed by the command interpreter for login shells.
# This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login
# exists.
# see /usr/share/doc/bash/examples/startup-files for examples.
# the files are located in the bash-doc package.

# the default umask is set in /etc/profile; for setting the umask
# for ssh logins, install and configure the libpam-umask package.
#umask 022

#-- The Linux Kernel: Prior to systemd, /sbin/init was always the first process in a Linux system as part of the System V Init system manager. In fact, you still find /sbin/init

alain@ubuntuserver22:~$ sudo head -n 1 /lib/systemd/systemd
```h▒h▒▒N▒^▒^▒▒▒▒▒▒▒▒8880hhhDDS▒td8880P▒td▒q▒q▒q▒-▒-Q▒tdR▒td▒N▒^▒^p▒p▒/lib64/ld-linux-x86-64.so.2 GNU▒▒▒GNU`▒"▒N3>A▒▒.▒D▒I8▒GNUP▒ ▒


#-- Where Kernels are Stored: /boot
#-- Most of these files include the kernel version number components in their names (kernel version, major revision, minor revision and patch number)
alain@ubuntuserver22:/boot$ ls
config-5.15.0-25-generic  initrd.img-5.15.0-25-generic  System.map-5.15.0-25-generic  vmlinuz-5.15.0-88-generic
config-5.15.0-88-generic  initrd.img-5.15.0-88-generic  System.map-5.15.0-88-generic  vmlinuz.old
grub                      initrd.img.old                vmlinuz
initrd.img                lost+found                    vmlinuz-5.15.0-25-generic

#-- Because it is a critical feature of the operating system, more than one kernel and its associated files are kept in /boot in case the default one becomes faulty and we have to fall back on a previous version to — at least — be able to boot the system up and fix it.
alain@ubuntuserver22:/boot$ ls /boot/grub/
fonts  gfxblacklist.txt  grub.cfg  grubenv  i386-pc  locale  unicode.pf2


#-- Configuration directory for the grub2 bootloader.
alain@ubuntuserver22:/boot$ cat /boot/grub/grub.cfg
#
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
#

### BEGIN /etc/grub.d/00_header ###
if [ -s $prefix/grubenv ]; then
  set have_grubenv=true
  load_env
....

#--The /proc Directory so-called virtual or pseudo filesystems since its contents are not written to disk, but loaded in memory. It is dynamically populated every time the computer boots up and constantly reflects the current state of the system.
#--• Running processes
#--• Kernel configuration
#--• System hardware

alain@ubuntuserver22:/$ head -n 10 /proc/cpuinfo
processor : 0
vendor_id : GenuineIntel
cpu family : 6
model   : 140
model name : 11th Gen Intel(R) Core(TM) i5-1145G7 @ 2.60GHz
stepping : 1
cpu MHz  : 2611.196
cache size : 8192 KB
physical id   : 0
siblings : 1
....

#-- /proc/cmdline - It stores the strings passed to the kernel on boot:
alain@ubuntuserver22:/$ head -n 10 /proc/cmdline
BOOT_IMAGE=/vmlinuz-5.15.0-88-generic root=UUID=67c8c573-e0dc-4770-9002-8be1a8565e3f ro

#-- It shows the list of modules loaded into the kernel:
alain@ubuntuserver22:/$ head -n 10 /proc/modules
vboxsf 36864 0 - Live 0x0000000000000000
vboxguest 45056 3 vboxsf, Live 0x0000000000000000
vboxvideo 28672 0 - Live 0x0000000000000000
drm_vram_helper 24576 1 vboxvideo, Live 0x0000000000000000
drm_ttm_helper 16384 2 vboxvideo,drm_vram_helper, Live 0x0000000000000000
binfmt_misc 24576 1 - Live 0x0000000000000000
intel_rapl_msr 20480 0 - Live 0x0000000000000000
intel_rapl_common 40960 1 intel_rapl_msr, Live 0x0000000000000000
snd_intel8x0 45056 0 - Live 0x0000000000000000
intel_powerclamp 24576 0 - Live 0x0000000000000000

# -- The /proc/sys Directory -- includes kernel configuration settings in files classified into categories per subdirectory
alain@ubuntuserver22:/$ ls /proc/sys
abi  debug  dev  fs  kernel  net  user  vm

#--kernel
alain@ubuntuserver22:/$ ls /proc/sys/kernel/
acct                           msg_next_id                        sched_energy_aware
acpi_video_flags               ngroups_max                        sched_rr_timeslice_ms
apparmor_display_secid_mode    nmi_watchdog                       sched_rt_period_us
auto_msgmni                    ns_last_pid                        sched_rt_runtime_us
....


#--Most of these files act like a switch and — therefore — only contain either of two possible values: 0 or 1 (“on” or “off”). For instance:
#--enables or disables our machine to act as a router (be able to forward packets):
alain@ubuntuserver22:/$ cat /proc/sys/net/ipv4/ip_forward
0

#-- There are some exceptions, though:
alain@ubuntuserver22:/$ cat /proc/sys/kernel/pid_max
4194304

#--The /dev Directory; /dev contains device files (or nodes) for all connected hardware devices.
#--check for hard disks and partitions
alain@ubuntuserver22:/$ ls -l /dev/sd*
brw-rw---- 1 root disk 8, 0 Nov 28 09:34 /dev/sda
brw-rw---- 1 root disk 8, 1 Nov 28 09:34 /dev/sda1
brw-rw---- 1 root disk 8, 2 Nov 28 09:34 /dev/sda2
brw-rw---- 1 root disk 8, 3 Nov 28 09:34 /dev/sda3
brw-rw---- 1 root disk 8, 4 Nov 28 09:34 /dev/sda4
brw-rw---- 1 root disk 8, 5 Nov 28 09:34 /dev/sda5

#--Or for serial terminals (TeleTYpewriter):
alain@ubuntuserver22:/$ ls -l /dev/tty*
crw-rw-rw- 1 root  tty     5,  0 Nov 28 10:25 /dev/tty
crw--w---- 1 root  tty     4,  0 Nov 28 09:34 /dev/tty0
crw------- 1 alain tty     4,  1 Nov 28 09:35 /dev/tty1
crw--w---- 1 root  tty     4, 10 Nov 28 09:34 /dev/tty10
crw--w---- 1 root  tty     4, 11 Nov 28 09:34 /dev/tty11
....

#-- which 'tty' am I ?
alain@ubuntuserver22:~/5_3_play_permission$ tty
/dev/pts/0

#-- which 'tty' am I again?
Last login: Tue Dec 12 09:07:06 2023 from 10.0.2.2
alain@ubuntuserver22:~$ tty
/dev/pts/1




#-- ◦ How were old IDE (Integrated Drive Electronics) drives represented:
/dev/hd*
#-- ◦ And modern NVMe (Non-Volatile Memory Express) drives:
/dev/nvme*


#--/dev includes some special files which are quite useful
#--It provides as many null characters as requested
alain@ubuntuserver22:/$ ls /dev/zero
/dev/zero
#--Aka bit bucket. It discards all information sent to it.
alain@ubuntuserver22:/$ ls /dev/null
/dev/null
#--It generates pseudo-random numbers
alain@ubuntuserver22:/$ ls /dev/random
/dev/random

#--'sys' The /sys Directory: The sys filesystem (sysfs) is mounted on /sys. A great improvement on /proc/sys after arrival kernel 2.6.
# -- interact with the devices in /dev and so the kernel needs
# -- For instance, to check on the MAC address of your network card

alain@ubuntuserver22:/$ cat /sys/class/net/enp0s3/address
08:00:27:ef:72:09


#-- Mem: Physical memory also known as Random Access Memory (RAM) -- 
# -- Swap:  Portion of virtual memory that lives on the hard disk, ! used when there is no more RAM available!
alain@ubuntuserver22:/$ free
               total        used        free      shared  buff/cache   available
Mem:         2011236      207576     1060948        1108      742712     1639508
Swap:       13457400           0    13457400

# -- the amount of free and used memory in the system in a very clear manner /proc/meminfo
alain@ubuntuserver22:/$ cat /proc/meminfo
MemTotal:        2011236 kB
MemFree:         1060696 kB
MemAvailable:    1639420 kB
Buffers:           31924 kB
Cached:           665472 kB
SwapCached:            0 kB
Active:           180928 kB
Inactive:         609652 kB
Active(anon):       1028 kB
Inactive(anon):   102332 kB
Active(file):     179900 kB
Inactive(file):   507320 kB
Unevictable:       27776 kB
Mlocked:           27776 kB
SwapTotal:      13457400 kB
SwapFree:       13457400 kB
Dirty:                12 kB
Writeback:             0 kB
AnonPages:        121004 kB
Mapped:           133132 kB
Shmem:              1108 kB
KReclaimable:      45476 kB
Slab:              77716 kB
SReclaimable:      45476 kB
SUnreclaim:        32240 kB
KernelStack:        2332 kB
PageTables:         2500 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:    14463016 kB
Committed_AS:     526592 kB
VmallocTotal:   34359738367 kB
VmallocUsed:       36188 kB
VmallocChunk:          0 kB
Percpu:              588 kB
HardwareCorrupted:     0 kB
AnonHugePages:         0 kB
ShmemHugePages:        0 kB
ShmemPmdMapped:        0 kB
FileHugePages:         0 kB
FilePmdMapped:         0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
Hugetlb:               0 kB
DirectMap4k:      114624 kB
DirectMap2M:     1982464 kB

# -- total: Total amount of physical and swap memory installed. 
# -- used: Amount of physical and swap memory currently in use.
# -- free: Amount of physical and swap memory currently not in use.
# -- shared:Amount of physical memory used — mostly — by tmpfs.
# -- buff/cache:Amount of physical memory currently in use by kernel buffers and the page cache and slabs.
# -- available:Estimate of how much physical memory is available for new processes

#-- OPTION of cmd 'free'
#--kibibytes
alain@ubuntuserver22:/$ free -k
               total        used        free      shared  buff/cache   available
Mem:         2011236     1901612       69336         964       40288        9544
Swap:       13457400      407112    13050288
#--Gibibytes.
alain@ubuntuserver22:/$ free -g
               total        used        free      shared  buff/cache   available
Mem:               1           1           0           0           0           0
Swap:             12           1          11
#--Human-readable format.
alain@ubuntuserver22:/$ free -h
               total        used        free      shared  buff/cache   available
Mem:           1.9Gi       1.8Gi        53Mi       0.0Ki        45Mi        16Mi
Swap:           12Gi       3.0Gi       9.9Gi
#--bytes
alain@ubuntuserver22:/$ free -b
               total        used        free      shared  buff/cache   available
Mem:      2059505664  1911336960    85127168      483328    63041536    34996224
Swap:    13780377600  4686266368  9094111232
#--mebibytes (One mebibyte equals 1.048576 megabytes)
alain@ubuntuserver22:/$ free -m
               total        used        free      shared  buff/cache   available
Mem:            1964        1810          69           0          83          33
Swap:          13141        4490        8651


alain@ubuntuserver22:/$ man free

OPTIONS
       -b, --bytes
              Display the amount of memory in bytes.

       -k, --kibi
              Display the amount of memory in kibibytes.  This is the default.

       -m, --mebi
              Display the amount of memory in mebibytes.

       -g, --gibi
              Display the amount of memory in gibibytes.

       --tebi Display the amount of memory in tebibytes.

       --pebi Display the amount of memory in pebibytes.


#--/sbin is for administrative tasks and system maintenance, whereas /bin contains commands for regular users and everyday tasks.

# -- Guided Exercises : if /sbin needs to be root:
alain@ubuntuserver22:/$ which swapon
/usr/sbin/swapon
alain@ubuntuserver22:/$ which kill
/usr/bin/kill
alain@ubuntuserver22:/$ which cut
/usr/bin/cut
alain@ubuntuserver22:/$ which usermod
/usr/sbin/usermod
alain@ubuntuserver22:/$ which cron
/usr/sbin/cron
alain@ubuntuserver22:/$ which ps
/usr/bin/ps

# etc/bash.bashrc = 
alain@ubuntuserver22:/$ head /etc/bash.bashrc
# System-wide .bashrc file for interactive bash(1) shells.

# To enable the settings / commands in this file for login shells as well,
# this file has to be sourced in /etc/profile.

# If not running interactively, don't do anything
[ -z "$PS1" ] && return

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.


# -- vmlinuz-4.15.0-50-generic

# -- # -- 4 Kernel version
# -- # -- 15 Major revision
# -- # -- 0 Minor revision
# -- # -- 50 Patch number


#-- 4.3 Where Data is Stored -- PART 2

#--Processes : Every process has a unique identifier (PID) and parent process identifier (PPID).



alain@ubuntuserver22:/$ top
top - 13:02:46 up  3:28,  2 users,  load average: 0.00, 0.00, 0.00
Tasks: 105 total,   1 running, 104 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   1964.1 total,   1712.7 free,    117.0 used,    134.4 buff/cache
MiB Swap:  13142.0 total,  13088.1 free,     53.9 used.   1702.3 avail Mem

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
    196 root     -51   0       0      0      0 S   0.3   0.0   0:01.83 irq/18-vmwgfx
   2292 root      20   0       0      0      0 I   0.3   0.0   0:02.18 kworker/0:0-events
      1 root      20   0  166420   5928   5112 S   0.0   0.3   0:02.37 systemd
      2 root      20   0       0      0      0 S   0.0   0.0   0:00.00 kthreadd
      3 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_gp
      4 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_par_gp
      5 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 slub_flushwq
      6 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 netns
      8 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 kworker/0:0H-events_highpri
     10 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 mm_percpu_wq
     11 root      20   0       0      0      0 S   0.0   0.0   0:00.00 rcu_tasks_rude_
     12 root      20   0       0      0      0 S   0.0   0.0   0:00.00 rcu_tasks_trace
     13 root      20   0       0      0      0 S   0.0   0.0   0:00.36 ksoftirqd/0
     14 root      20   0       0      0      0 I   0.0   0.0   0:02.41 rcu_sched
     15 root      rt   0       0      0      0 S   0.0   0.0   0:00.06 migration/0


#-- A Snapshot of Processes: ps -- Whereas top provides dynamic information, that of ps is static.

alain@ubuntuserver22:~$ ps
    PID TTY          TIME CMD
   1806 pts/0    00:00:00 bash
   1926 pts/0    00:00:00 ps
   
#-- -f shows the relationship between parent and child
processes
alain@ubuntuserver22:~$ ps -f
UID          PID    PPID  C STIME TTY          TIME CMD
alain       1806    1805  0 10:18 pts/0    00:00:00 -bash
alain       1927    1806  0 13:55 pts/0    00:00:00 ps -f


alain@ubuntuserver22:~$ ps -uf
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
alain       1806  0.0  0.2   8996  5828 pts/0    Ss   10:18   0:00 -bash
alain       1928  0.0  0.1  10488  3540 pts/0    R+   13:55   0:00  \_ ps -uf
alain       1565  0.0  0.2   8872  5508 tty1     S+   10:17   0:00 -bash


alain@ubuntuserver22:~$ ps -u
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
alain       1565  0.0  0.2   8872  5508 tty1     S+   10:17   0:00 -bash
alain       1806  0.0  0.2   8996  5828 pts/0    Ss   10:18   0:00 -bash
alain       1932  0.0  0.0  10068  1564 pts/0    R+   13:57   0:00 ps -u

#-- Likewise, ps can show the percentage of memory used when invoked with the -v switch:
alain@ubuntuserver22:~$ ps -v
    PID TTY      STAT   TIME  MAJFL   TRS   DRS   RSS %MEM COMMAND
   1565 tty1     S+     0:00      3   891  7980  5508  0.2 -bash
   1806 pts/0    Ss     0:00      2   891  8104  5832  0.2 -bash
   1959 pts/0    R+     0:00      0    50 10017  1596  0.0 ps -v


# -- man 'ps'
alain@ubuntuserver22:~$ man ps
EXAMPLES
       To see every process on the system using standard syntax:
          ps -e
          ps -ef
          ps -eF
          ps -ely

       To see every process on the system using BSD syntax:
          ps ax
          ps axu

       To print a process tree:
          ps -ejH
          ps axjf

# -- 
alain@ubuntuserver22:~$ ps axjf
   PPID     PID    PGID     SID TTY        TPGID STAT   UID   TIME COMMAND
      0       2       0       0 ?             -1 S        0   0:00 [kthreadd]
      2       3       0       0 ?             -1 I<       0   0:00  \_ [rcu_gp]
      2       4       0       0 ?             -1 I<       0   0:00  \_ [rcu_par_gp]
      2       5       0       0 ?             -1 I<       0   0:00  \_ [slub_flushwq]
      2       6       0       0 ?             -1 I<       0   0:00  \_ [netns]
      2       8       0       0 ?             -1 I<       0   0:00  \_ [kworker/0:0H-events_highpri]
		  
		  
		 
# -- 
alain@ubuntuserver22:~$ ps axjf
   PPID     PID    PGID     SID TTY        TPGID STAT   UID   TIME COMMAND
      0       2       0       0 ?             -1 S        0   0:00 [kthreadd]
      2       3       0       0 ?             -1 I<       0   0:00  \_ [rcu_gp]
      2       4       0       0 ?             -1 I<       0   0:00  \_ [rcu_par_gp]

# -- 
alain@ubuntuserver22:~$  ps -eo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,comm
    PID     TID CLS RTPRIO  NI PRI PSR %CPU STAT WCHAN          COMMAND
      1       1 TS       -   0  19   0  0.0 Ss   -              systemd
      2       2 TS       -   0  19   0  0.0 S    -              kthreadd
      3       3 TS       - -20  39   0  0.0 I<   -              rcu_gp
      4       4 TS       - -20  39   0  0.0 I<   -              rcu_par_gp
      5       5 TS       - -20  39   0  0.0 I<   -              slub_flushwq
      6       6 TS       - -20  39   0  0.0 I<   -              netns
      8       8 TS       - -20  39   0  0.0 I<   -              kworker/0:0H-events_highpri


# -- /proc includes a numbered subdirectory for every running process in the system (the number is the PID of the process):
alain@ubuntuserver22:~$ ls /proc
1     1550  19    206  3    542  662  81  acpi        driver         key-users    net            sysvipc
10    1551  1905  208  369  544  689  83  asound      dynamic_debug  kmsg         pagetypeinfo   thread-self
11    1565  192   21   4    6    698  85  bootconfig  execdomains    kpagecgroup  partitions     timer_list
110   159   194   213  402  622  708  86  buddyinfo   fb             kpagecount   pressure       tty
113   16    195   22   403  624  73   88  bus         filesystems    kpageflags   schedstat      uptime
114   160   1958  23   405  635  74   89  cgroups     fs             loadavg      scsi           version
119   162   197   24   406  637  75   91  cmdline     interrupts     locks        self           version_signature
12    1744  199   241  407  644  76   92  consoles    iomem          mdstat       slabinfo       vmallocinfo
1263  18    1996  25   409  645  77   93  cpuinfo     ioports        meminfo      softirqs       vmstat
1268  1805  2     26   410  646  78   94  crypto      irq            misc         stat           zoneinfo
13    1806  20    27   5    648  79   96  devices     kallsyms       modules      swaps
14    1838  201   297  535  650  8    98  diskstats   kcore          mounts       sys
15    1875  203   298  538  652  80   99  dma         keys           mtrr         sysrq-trigger

# -- /proc example of PID 2 content folder
alain@ubuntuserver22:~$ sudo ls /proc/2/
[sudo] password for alain:
arch_status  comm                fd         maps        numa_maps      projid_map  smaps_rollup  timens_offsets
attr         coredump_filter     fdinfo     mem         oom_adj        root        stack         timers
autogroup    cpu_resctrl_groups  gid_map    mountinfo   oom_score      sched       stat          timerslack_ns
auxv         cpuset              io         mounts      oom_score_adj  schedstat   statm         uid_map
cgroup       cwd                 limits     mountstats  pagemap        sessionid   status        wchan
clear_refs   environ             loginuid   net         patch_state    setgroups   syscall
cmdline      exe                 map_files  ns          personality    smaps       task


# -- check — for instance — the process executable:

alain@ubuntuserver22:~$ cat /proc/1/cmdline; echo
/sbin/init

alain@ubuntuserver22:~$ cat /proc/1806/cmdline; echo
-bash

# -- The System Load : overall load of the system into a single numeric indicator see the current load with the command uptime:
# -- The three last digits indicate the system’s load average for the last minute (2.91), the last five minutes (1.59) and the last fifteen minutes (0.39), respectively
alain@ubuntuserver22:~$ uptime
 14:11:22 up  3:54,  2 users,  load average: 0.00, 0.00, 0.00
 
 
# -- System Logging and System Messaging

# -- Logging with the syslog Daemon '/var/log/'
# -- under /var/log. However, some services take care of their own logs (take — for example — the Apache HTTPD web server).

alain@ubuntuserver22:~$ ls /var/log/
alternatives.log  bootstrap.log          dmesg.2.gz  kern.log.1     syslog.2.gz                 vboxadd-setup.log.2
apport.log        btmp                   dmesg.3.gz  kern.log.2.gz  syslog.3.gz                 vboxadd-setup.log.3
apport.log.1      cloud-init.log         dmesg.4.gz  kern.log.3.gz  ubuntu-advantage.log        vboxadd-setup.log.4
apt               cloud-init-output.log  dpkg.log    landscape      ubuntu-advantage-timer.log  wtmp
auth.log          dist-upgrade           faillog     lastlog        unattended-upgrades
auth.log.1        dmesg                  installer   private        vboxadd-install.log
auth.log.2.gz     dmesg.0                journal     syslog         vboxadd-setup.log
auth.log.3.gz     dmesg.1.gz             kern.log    syslog.1       vboxadd-setup.log.1

#-- /var/log/auth.log - stores information about authentication

alain@ubuntuserver22:~$ sudo head -n 10 /var/log/auth.log
[sudo] password for alain:
Nov 28 09:34:32 ubuntuserver22 useradd[931]: failed adding user 'vboxadd', data deleted
Nov 28 09:34:32 ubuntuserver22 useradd[932]: failed adding user 'vboxadd', data deleted
Nov 28 09:35:29 ubuntuserver22 login[659]: pam_unix(login:auth): check pass; user unknown
Nov 28 09:35:29 ubuntuserver22 login[659]: pam_unix(login:auth): authentication failure; logname=LOGIN uid=0 euid=0 tty=/dev/tty1 ruser= rhost=
Nov 28 09:35:32 ubuntuserver22 login[659]: FAILED LOGIN (1) on '/dev/tty1' FOR 'UNKNOWN', Authentication failure
Nov 28 09:35:39 ubuntuserver22 login[659]: pam_unix(login:session): session opened for user alain(uid=1001) by LOGIN(uid=0)
Nov 28 09:35:39 ubuntuserver22 systemd-logind[649]: New session 1 of user alain.
Nov 28 09:35:39 ubuntuserver22 systemd: pam_unix(systemd-user:session): session opened for user alain(uid=1001) by (uid=0)
Nov 28 09:35:45 ubuntuserver22 sshd[1605]: Accepted password for alain from 10.0.2.2 port 60703 ssh2
Nov 28 09:35:45 ubuntuserver22 sshd[1605]: pam_unix(sshd:session): session opened for user alain(uid=1001) by (uid=0)


#-- /var/log/auth.log - stores information about authentication.
alain@ubuntuserver22:~$ sudo head -n 10 /var/log/kern.log
Nov 28 09:34:28 ubuntuserver22 kernel: [   21.390320] loop5: detected capacity change from 0 to 8
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.156891] vboxguest: host-version: 7.0.10r158379 0x8000000f
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.157292] vbg_heartbeat_init: Setting up heartbeat to trigger every 2000 milliseconds
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.158715] input: VirtualBox mouse integration as /devices/pci0000:00/0000:00:04.0/input/input8
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.161742] vboxguest: misc device minor 123, IRQ 20, I/O port d040, MMIO at 0x00000000f0400000 (size 0x0000000000400000)
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.182237] 09:34:33.261921 main     VBoxService 7.0.10 r158379 (verbosity: 0) linux.amd64 (Jul 12 2023 20:36:16) release log
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.182237] 09:34:33.2619
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.182534] 09:34:33.262523 main     OS Product: Linux
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.182926] 09:34:33.262716 main     OS Release: 5.15.0-88-generic
Nov 28 09:34:33 ubuntuserver22 kernel: [   26.183328] 09:34:33.263094 main     OS Version: #98-Ubuntu SMP Mon Oct 2 1

#-- /var/log/syslog - stores system information.
alain@ubuntuserver22:~$ sudo tail -n 10 /var/log/syslog
Nov 29 10:32:14 ubuntuserver22 systemd[1]: Finished Cleanup of Temporary Directories.
Nov 29 10:54:44 ubuntuserver22 systemd[1]: Condition check resulted in Daily man-db regeneration being skipped.
Nov 29 10:56:44 ubuntuserver22 systemd[1]: Condition check resulted in Daily apt upgrade and clean activities being skipped.
Nov 29 11:11:44 ubuntuserver22 systemd[1]: Starting Ubuntu Advantage Timer for running repeated jobs...
Nov 29 11:11:44 ubuntuserver22 systemd[1]: ua-timer.service: Deactivated successfully.
Nov 29 11:11:44 ubuntuserver22 systemd[1]: Finished Ubuntu Advantage Timer for running repeated jobs.
Nov 29 11:17:01 ubuntuserver22 CRON[1852]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
Nov 29 12:17:01 ubuntuserver22 CRON[1872]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
Nov 29 13:17:01 ubuntuserver22 CRON[1890]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
Nov 29 14:17:01 ubuntuserver22 CRON[2027]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)


#-- less Is like : tail -f
alain@ubuntuserver22:~$ sudo less /var/log/syslog
Nov 28 09:34:26 ubuntuserver22 systemd[1]: rsyslog.service: Sent signal SIGHUP to main process 645 (rsyslogd) on client request.
Nov 28 09:34:26 ubuntuserver22 systemd[1]: logrotate.service: Deactivated successfully.
Nov 28 09:34:26 ubuntuserver22 systemd[1]: Finished Rotate log files.
Nov 28 09:34:26 ubuntuserver22 systemd[1]: Started Dispatcher daemon for systemd-networkd.
Nov 28 09:34:26 ubuntuserver22 systemd[1]: Started Disk Manager.
Nov 28 09:34:26 ubuntuserver22 udisksd[651]: Acquired the name org.freedesktop.UDisks2 on the system message bus
Nov 28 09:34:26 ubuntuserver22 vboxadd[652]: VirtualBox Guest Additions: Starting.
Nov 28 09:34:26 ubuntuserver22 vboxadd[767]: VirtualBox Guest Additions: Setting up modules
Nov 28 09:34:26 ubuntuserver22 vboxadd[776]: VirtualBox Guest Additions: Building the VirtualBox Guest Additions kern

#-- See with tail -f
alain@ubuntuserver22:~$ sudo tail -f /var/log/syslog
Nov 29 11:17:01 ubuntuserver22 CRON[1852]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
Nov 29 12:17:01 ubuntuserver22 CRON[1872]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
Nov 29 13:17:01 ubuntuserver22 CRON[1890]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
Nov 29 14:17:01 ubuntuserver22 CRON[2027]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
Nov 29 14:25:36 ubuntuserver22 systemd[1]: Starting Daily apt download activities...
Nov 29 14:25:40 ubuntuserver22 dbus-daemon[637]: [system] Activating via systemd: service name='org.freedesktop.PackageKit' unit='packagekit.service' requested by ':1.18' (uid=0 pid=2313 comm="/usr/bin/gdbus call --system --dest org.freedeskto" label="unconfined")
Nov 29 14:25:40 ubuntuserver22 systemd[1]: Starting PackageKit Daemon...
Nov 29 14:25:40 ubuntuserver22 PackageKit: daemon start
Nov 29 14:25:40 ubuntuserver22 dbus-daemon[637]: [system] Successfully activated service 'org.freedesktop.PackageKit'
Nov 29 14:25:40 ubuntuserver22 systemd[1]: Started PackageKit Daemon.

# -- output into the following format:
# --• Timestamp
# --• Hostname from which the message came from
# --• Name of program/service that generated the message
# --• The PID of the program that generated the message
# --• Description of the action that took place

# -- 'file' command to determine which is the case: binary OR plain text
alain@ubuntuserver22:~$ file /var/log/wtmp
/var/log/wtmp: data
alain@ubuntuserver22:~$ sudo file /var/log/syslog
/var/log/syslog: ASCII text
alain@ubuntuserver22:~$ sudo file /var/log/kern.log
/var/log/kern.log: ASCII text


#--File in the binary format, better to use 'lastb' = lastb command displays a list of bad (failed) logins
alain@ubuntuserver22:~$ sudo tail -f /var/log/btmp
▒tty1tty1UNKNOWN▒▒@e▒▒tty1tty1UNKNOWN▒▒▒@e▒F▒ssh:nottyalain▒10.0.2.2Apde
▒ssh:nottyalain▒10.0.2.2Epde
▒ssh:nottyalain▒10.0.2.2Kpde
▒tty1tty1UNKNOWN▒d▒eeT!
^[[A^[[D^C

#--File in the binary format, better to use 'last' = last command displays a list of the most recently logged in users
alain@ubuntuserver22:~$ sudo tail -f /var/log/wtmp
▒tty1alain)▒]eJ▒5~~~runlevel5.15.0-88-generic/▒]e▒▒     ▒pts/0ts/0alain10.0.2.2▒▒]e▒b                               ▒pts/0▒▒]eK▒
~~~shutdown5.15.0-88-generic▒▒]et~~~reboot5.15.0-88-generic▒]e4C▒tty1tty1▒+▒]ey`        ▒tty1tty1LOGIN▒+▒]ey`   5~~~runlevel5.15.0-88-generic7▒]ea▒
>pts/0ts/0alain10.0.2.2d▒]e▒                                                                                        >pts/0▒^e-W

#--Example 'last' vs 'lastb'
#--FAILED attempts
alain@ubuntuserver22:~$ sudo lastb | grep alain
alain\303   ssh:notty    10.0.2.2         Mon Nov 27 10:32 - 10:32  (00:00)
alain\303   ssh:notty    10.0.2.2         Mon Nov 27 10:32 - 10:32  (00:00)
alain\303   ssh:notty    10.0.2.2         Mon Nov 27 10:32 - 10:32  (00:00)
#--SUCCSS attempts
alain@ubuntuserver22:~$ sudo last | grep alain
alain    pts/0        10.0.2.2         Thu Nov 30 11:10   still logged in
alain    pts/0        10.0.2.2         Wed Nov 29 10:18 - 16:06  (05:47)
alain    tty1                          Wed Nov 29 10:17 - down   (05:48)
alain    pts/0        10.0.2.2         Tue Nov 28 09:35 - 13:06  (03:31)





# -- Log Rotation
 ls /var/log/apache2/
access.log error.log error.log.1 error.log.2.gz other_vhosts_access.log

# -- The Kernel Ring Buffer (!!!Used when the OS start!!!): records kernel boot messages as well as any live kernel messages. 
# -- The function of this buffer — a very important one — is that of logging all the kernel messages produced on boot — when syslog is not yet available


# -- For instance, to search for boot messages
# -- with 'dmesg' and 'grep'
alain@ubuntuserver22:~$ sudo dmesg | grep boot
[    0.005157] smpboot: Allowing 1 CPUs, 0 hotplug CPUs
[    0.188899] smpboot: CPU0: 11th Gen Intel(R) Core(TM) i5-1145G7 @ 2.60GHz (family: 0x6, model: 0x8c, stepping: 0x1)
[    0.189180] smpboot: Max logical packages: 1
[    0.189180] smpboot: Total of 1 processors activated (5222.39 BogoMIPS)
[    0.259270] pci 0000:00:02.0: vgaarb: setting as boot VGA device

# -- with 'cat /var/log/dmesg' and 'grep'
alain@ubuntuserver22:~$ sudo cat /var/log/dmesg | grep boot
[    0.005157] kernel: smpboot: Allowing 1 CPUs, 0 hotplug CPUs
[    0.188899] kernel: smpboot: CPU0: 11th Gen Intel(R) Core(TM) i5-1145G7 @ 2.60GHz (family: 0x6, model: 0x8c, stepping: 0x1)
[    0.189180] kernel: smpboot: Max logical packages: 1
[    0.189180] kernel: smpboot: Total of 1 processors activated (5222.39 BogoMIPS)
[    0.259270] kernel: pci 0000:00:02.0: vgaarb: setting as boot VGA device


# --The System Journal: systemd-journald : As of 2015, systemd replaced SysV Init as a de facto system and service manager in most major Linux distributions. As a consequence, the journal daemon — journald — has become the standard logging component, superseding syslog in most aspects. The data is no longer stored in plain text but in binary form. Thus, the journalctl

alain@ubuntuserver22:~$ journalctl
Hint: You are currently not seeing messages from other users and the system.
      Users in groups 'adm', 'systemd-journal' can see all messages.
      Pass -q to turn off this notice.
Oct 31 10:54:14 osboxes systemd[1098]: Queued start job for default target Main User Target.
Oct 31 10:54:14 osboxes systemd[1098]: Created slice User Application Slice.
Oct 31 10:54:14 osboxes systemd[1098]: Reached target Paths.
Oct 31 10:54:14 osboxes systemd[1098]: Reached target Timers.
Oct 31 10:54:14 osboxes systemd[1098]: Starting D-Bus User Message Bus Socket...
Oct 31 10:54:14 osboxes systemd[1098]: Listening on GnuPG network certificate management daemon.
Oct 31 10:54:14 osboxes systemd[1098]: Listening on GnuPG cryptographic agent and passphrase cache (access for web b>
Oct 31 10:54:14 osboxes systemd[1098]: Listening on GnuPG cryptographic agent and passphrase cache (restricted).
Oct 31 10:54:14 osboxes systemd[1098]: Listening on GnuPG cryptographic agent (ssh-agent emulation).
Oct 31 10:54:14 osboxes systemd[1098]: Listening on GnuPG cryptographic agent and passphrase cache.
Oct 31 10:54:14 osboxes systemd[1098]: Listening on debconf communication socket.
Oct 31 10:54:14 osboxes systemd[1098]: Listening on REST API socket for snapd user session agent.
Oct 31 10:54:14 osboxes systemd[1098]: Listening on D-Bus User Message Bus Socket.
Oct 31 10:54:14 osboxes systemd[1098]: Reached target Sockets.
Oct 31 10:54:14 osboxes systemd[1098]: Reached target Basic System.
Oct 31 10:54:14 osboxes systemd[1098]: Reached target Main User Target.
Oct 31 10:54:14 osboxes systemd[1098]: Startup finished in 93ms.
Oct 31 10:54:20 osboxes sudo[1115]:    alain : user NOT in sudoers ; TTY=tty1 ; PWD=/home/alain ; USER=root ; COMMAN>
....



alain@ubuntuserver22:~$ sudo journalctl
Apr 23 01:05:01 osboxes kernel: Linux version 5.15.0-25-generic (buildd@ubuntu) (gcc (Ubuntu 11.2.0-19ubuntu1) 11.2.>
Apr 23 01:05:01 osboxes kernel: Command line: BOOT_IMAGE=/vmlinuz-5.15.0-25-generic root=UUID=67c8c573-e0dc-4770-900>
Apr 23 01:05:01 osboxes kernel: KERNEL supported cpus:
Apr 23 01:05:01 osboxes kernel:   Intel GenuineIntel
Apr 23 01:05:01 osboxes kernel:   AMD AuthenticAMD
Apr 23 01:05:01 osboxes kernel:   Hygon HygonGenuine
Apr 23 01:05:01 osboxes kernel:   Centaur CentaurHauls
Apr 23 01:05:01 osboxes kernel:   zhaoxin   Shanghai
Apr 23 01:05:01 osboxes kernel: x86/fpu: Supporting XSAVE feature 0x001: 'x87 floating point registers'
Apr 23 01:05:01 osboxes kernel: x86/fpu: Supporting XSAVE feature 0x002: 'SSE registers'
Apr 23 01:05:01 osboxes kernel: x86/fpu: Supporting XSAVE feature 0x004: 'AVX registers'
Apr 23 01:05:01 osboxes kernel: x86/fpu: xstate_offset[2]:  576, xstate_sizes[2]:  256
Apr 23 01:05:01 osboxes kernel: x86/fpu: Enabled xstate features 0x7, context size is 832 bytes, using 'standard' fo>
Apr 23 01:05:01 osboxes kernel: signal: max sigframe size: 1776
Apr 23 01:05:01 osboxes kernel: BIOS-provided physical RAM map:
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x0000000000100000-0x00000000dffeffff] usable
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x00000000dfff0000-0x00000000dfffffff] ACPI data
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x00000000fec00000-0x00000000fec00fff] reserved
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x00000000fee00000-0x00000000fee00fff] reserved
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
Apr 23 01:05:01 osboxes kernel: BIOS-e820: [mem 0x0000000100000000-0x000000011fffffff] usable


# -- Equivalent 'journalctl' provide what is in : '/run/log/journal' but NOT readeable because on BINARY format.
alain@ubuntuserver22:~$ ll /var/log/journal/
total 12
drwxr-sr-x+  3 root systemd-journal 4096 Apr 23  2022 ./
drwxrwxr-x  10 root syslog          4096 Nov 30 11:08 ../
drwxr-sr-x+  2 root systemd-journal 4096 Nov 15 08:32 d65d2c9bb0c644bb897a44eb78fa79c1/



# -- If invoked with the -k or --dmesg switches, it will be equivalent to using the dmesg
# -- 'journalctl -k' 'grep'
alain@ubuntuserver22:~$ sudo journalctl -k | grep BIOS
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-provided physical RAM map:
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-e820: [mem 0x0000000000100000-0x000000007ffeffff] usable
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-e820: [mem 0x000000007fff0000-0x000000007fffffff] ACPI data
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-e820: [mem 0x00000000fec00000-0x00000000fec00fff] reserved
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-e820: [mem 0x00000000fee00000-0x00000000fee00fff] reserved
Nov 29 10:17:01 ubuntuserver22 kernel: BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
Nov 29 10:17:01 ubuntuserver22 kernel: SMBIOS 2.5 present.
Nov 29 10:17:01 ubuntuserver22 kernel: DMI: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
Nov 29 10:17:01 ubuntuserver22 kernel: ACPI: DSDT 0x000000007FFF0610 002353 (v02 VBOX   VBOXBIOS 00000002 INTL 20100528)

# -- 'dmesg' 'grep'
alain@ubuntuserver22:~$ sudo dmesg | grep BIOS
[    0.000000] BIOS-provided physical RAM map:
[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
[    0.000000] BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000007ffeffff] usable
[    0.000000] BIOS-e820: [mem 0x000000007fff0000-0x000000007fffffff] ACPI data
[    0.000000] BIOS-e820: [mem 0x00000000fec00000-0x00000000fec00fff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000fee00000-0x00000000fee00fff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
[    0.000000] SMBIOS 2.5 present.
[    0.000000] DMI: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
[    0.001108] ACPI: DSDT 0x000000007FFF0610 002353 (v02 VBOX   VBOXBIOS 00000002 INTL 20100528)


# -- 'journalctl' -b, --boot -- >> It shows boot information.
alain@ubuntuserver22:~$ sudo journalctl -b | tail -n 10
Nov 29 15:10:49 ubuntuserver22 sudo[2715]: pam_unix(sudo:session): session opened for user root(uid=0) by alain(uid=1001)
Nov 29 15:10:49 ubuntuserver22 sudo[2715]: pam_unix(sudo:session): session closed for user root
Nov 29 15:10:56 ubuntuserver22 sudo[2719]:    alain : TTY=pts/0 ; PWD=/home/alain ; USER=root ; COMMAND=/usr/bin/journalctl -u
Nov 29 15:10:56 ubuntuserver22 sudo[2719]: pam_unix(sudo:session): session opened for user root(uid=0) by alain(uid=1001)
Nov 29 15:10:56 ubuntuserver22 sudo[2719]: pam_unix(sudo:session): session closed for user root
Nov 29 15:11:12 ubuntuserver22 sudo[2723]:    alain : TTY=pts/0 ; PWD=/home/alain ; USER=root ; COMMAND=/usr/bin/journalctl -u
Nov 29 15:11:12 ubuntuserver22 sudo[2723]: pam_unix(sudo:session): session opened for user root(uid=0) by alain(uid=1001)
Nov 29 15:11:12 ubuntuserver22 sudo[2723]: pam_unix(sudo:session): session closed for user root
Nov 29 15:11:33 ubuntuserver22 sudo[2726]:    alain : TTY=pts/0 ; PWD=/home/alain ; USER=root ; COMMAND=/usr/bin/journalctl -b
Nov 29 15:11:33 ubuntuserver22 sudo[2726]: pam_unix(sudo:session): session opened for user root(uid=0) by alain(uid=1001)

# -- It shows most recent journal messages and keeps printing new entries as they are appended to the journal — much like tail -f.
alain@ubuntuserver22:~$ sudo journalctl -f
Nov 29 15:10:56 ubuntuserver22 sudo[2719]: pam_unix(sudo:session): session opened for user root(uid=0) by alain(uid=1001)
Nov 29 15:10:56 ubuntuserver22 sudo[2719]: pam_unix(sudo:session): session closed for user root
Nov 29 15:11:12 ubuntuserver22 sudo[2723]:    alain : TTY=pts/0 ; PWD=/home/alain ; USER=root ; COMMAND=/usr/bin/journalctl -u
Nov 29 15:11:12 ubuntuserver22 sudo[2723]: pam_unix(sudo:session): session opened for user root(uid=0) by alain(uid=1001)
Nov 29 15:11:12 ubuntuserver22 sudo[2723]: pam_unix(sudo:session): session closed for user root
Nov 29 15:11:33 ubuntuserver22 sudo[2726]:    alain : TTY=pts/0 ; PWD=/home/alain ; USER=root ; COMMAND=/usr/bin/journalctl -b
Nov 29 15:11:33 ubuntuserver22 sudo[2726]: pam_unix(sudo:session): session opened for user root(uid=0) by alain(uid=1001)
Nov 29 15:11:33 ubuntuserver22 sudo[2726]: pam_unix(sudo:session): session closed for user root
Nov 29 15:13:36 ubuntuserver22 sudo[2730]:    alain : TTY=pts/0 ; PWD=/home/alain ; USER=root ; COMMAND=/usr/bin/journalctl -f
Nov 29 15:13:36 ubuntuserver22 sudo[2730]: pam_unix(sudo:session): session opened for user root(uid=0) by alain(uid=1001)

#-- 'journalctl' about 'ssh'
alain@ubuntuserver22:~$ sudo journalctl -u ssh.service
[sudo] password for alain:
Apr 23 01:05:16 osboxes systemd[1]: Starting OpenBSD Secure Shell server...
Apr 23 01:05:16 osboxes sshd[974]: Server listening on 0.0.0.0 port 22.
Apr 23 01:05:16 osboxes sshd[974]: Server listening on :: port 22.
Apr 23 01:05:16 osboxes systemd[1]: Started OpenBSD Secure Shell server.

#-- 'journalctl' about 'network' and 'rsyslog'
alain@ubuntuserver22:~$ sudo journalctl -u networking.service
-- No entries --
alain@ubuntuserver22:~$ sudo journalctl -u rsyslog.service | grep "Nov 30"
Nov 30 11:08:20 ubuntuserver22 systemd[1]: Starting System Logging Service...
Nov 30 11:08:20 ubuntuserver22 rsyslogd[648]: imuxsock: Acquired UNIX socket '/run/systemd/journal/syslog' (fd 3) from systemd.  [v8.2112.0]
Nov 30 11:08:20 ubuntuserver22 rsyslogd[648]: rsyslogd's groupid changed to 113
Nov 30 11:08:20 ubuntuserver22 rsyslogd[648]: rsyslogd's userid changed to 107
Nov 30 11:08:20 ubuntuserver22 rsyslogd[648]: [origin software="rsyslogd" swVersion="8.2112.0" x-pid="648" x-info="https://www.rsyslog.com"] start
Nov 30 11:08:20 ubuntuserver22 systemd[1]: Started System Logging Service.


#-- 'journalctl' about 'cron'
alain@ubuntuserver22:~$ sudo journalctl -u cron.service | grep "Nov 30"
Nov 30 11:08:20 ubuntuserver22 cron[638]: (CRON) INFO (pidfile fd = 3)
Nov 30 11:08:20 ubuntuserver22 systemd[1]: Started Regular background program processing daemon.
Nov 30 11:08:20 ubuntuserver22 cron[638]: (CRON) INFO (Running @reboot jobs)
Nov 30 11:17:01 ubuntuserver22 CRON[1804]: pam_unix(cron:session): session opened for user root(uid=0) by (uid=0)




# -- Find a particular service
alain@ubuntuserver22:~$ service cron status
● cron.service - Regular background program processing daemon
     Loaded: loaded (/lib/systemd/system/cron.service; enabled; vendor preset: enabled)
     Active: active (running) since Thu 2023-11-30 11:08:20 UTC; 1h 9min ago
       Docs: man:cron(8)
   Main PID: 638 (cron)
      Tasks: 1 (limit: 2223)
     Memory: 444.0K
        CPU: 22ms
     CGroup: /system.slice/cron.service
             └─638 /usr/sbin/cron -f -P

#-- 'exec' command

#-- Terminal 1
alain@ubuntuserver22:~$ exec sleep 100
#-- Terminal 2
alain@ubuntuserver22:~$ ps -ae | grep sleep
  13634 pts/0    00:00:00 sleep
#--  
  
#-- Terminal 1
alain@ubuntuserver22:~$ echo $$
13706
alain@ubuntuserver22:~$ exec sh

#-- Terminal 2
alain@ubuntuserver22:~$ ps -ae | grep "\bsh\b"
  13706 pts/0    00:00:00 sh
#--

#-- Terminal 1
alain@ubuntuserver22:~$ echo $$
13780
alain@ubuntuserver22:~$ exec /bin/bash

#-- Terminal 2
alain@ubuntuserver22:~$ ps -ae | grep 13780
  13780 pts/0    00:00:00 bash

#-- Example 'ping' 'ps' 'top':

#-- Terminal 1
alain@ubuntuserver22:~$ ping 127.0.0.1
PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.
64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.018 ms
64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.058 ms
#-- Terminal 2
alain@ubuntuserver22:~$ ps -uf
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
alain      13780  0.0  0.2   8788  5400 pts/0    Ss   12:45   0:00 /bin/bash
alain      13869  0.0  0.0   7716  1280 pts/0    S+   13:08   0:00  \_ ping 127.


# -- 4.4 Your Computer on the Network

# -- Config
alain@ubuntuserver22:~$ ip link
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 08:00:27:ef:72:09 brd ff:ff:ff:ff:ff:ff
	
alain@ubuntuserver22:~$ ip link show
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 08:00:27:ef:72:09 brd ff:ff:ff:ff:ff:ff

#--UBUNTU SERVER
# -- IP address can manually be added to an interface using the command 'ip addr add'
alain@ubuntuserver22:~$ sudo ip addr add 10.0.2.18/255.255.255.0 dev enp0s3

# IP 10.0.2.18 added as global secondary enp0s3
alain@ubuntuserver22:~$ ip addr show | grep inet
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host
    inet 10.0.2.16/24 brd 10.0.2.255 scope global enp0s3
    inet 10.0.2.18/24 scope global secondary enp0s3
    inet6 fe80::a00:27ff:feef:7209/64 scope link

#--It works 
alain@ubuntuserver22:~$ ping -c 3 10.0.2.18
PING 10.0.2.18 (10.0.2.18) 56(84) bytes of data.
64 bytes from 10.0.2.18: icmp_seq=1 ttl=64 time=0.015 ms
64 bytes from 10.0.2.18: icmp_seq=2 ttl=64 time=0.052 ms
64 bytes from 10.0.2.18: icmp_seq=3 ttl=64 time=0.067 ms

#--DEBIAN
# IP 10.0.2.24 
alain@debianvm11:~$ sudo ip addr add 10.0.2.24/255.255.255.0 dev enp0s3

# IP 10.0.2.24 added as global secondary enp0s3 
alain@debianvm11:~$ ip a | grep inet
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host
    inet 10.0.2.17/24 brd 10.0.2.255 scope global enp0s3
    inet 10.0.2.24/24 scope global secondary enp0s3
    inet6 fe80::a00:27ff:fe4c:5eec/64 scope link
#--It works 
alain@debianvm11:~$ ping -c 3 10.0.2.24
PING 10.0.2.24 (10.0.2.24) 56(84) bytes of data.
64 bytes from 10.0.2.24: icmp_seq=1 ttl=64 time=0.014 ms
64 bytes from 10.0.2.24: icmp_seq=2 ttl=64 time=0.034 ms
64 bytes from 10.0.2.24: icmp_seq=3 ttl=64 time=0.063 ms
	
#--See default gateway
#--UBUNTU SERVER
alain@ubuntuserver22:~$ ip route
default via 10.0.2.2 dev enp0s3 proto static
10.0.2.0/24 dev enp0s3 proto kernel scope link src 10.0.2.16
#--OR
alain@ubuntuserver22:~$ ip route show
default via 10.0.2.2 dev enp0s3 proto static
10.0.2.0/24 dev enp0s3 proto kernel scope link src 10.0.2.16

#--DEBIAN Defaut gateway	
alain@debianvm11:~$ ip route
default via 10.0.2.2 dev enp0s3 onlink
10.0.2.0/24 dev enp0s3 proto kernel scope link src 10.0.2.17
169.254.0.0/16 dev enp0s3 scope link metric 1000

#--UBUNTU SERVER Defaut gateway
alain@ubuntuserver22:~$ ip route
default via 10.0.2.2 dev enp0s3 proto static
10.0.2.0/24 dev enp0s3 proto kernel scope link src 10.0.2.16

#--UBUNTU SERVER Defaut gateway --  try to change it but :
alain@ubuntuserver22:~$ sudo ip route add default via 10.0.2.1
RTNETLINK answers: File exists

#--Add IPv6 on the machine
alain@ubuntuserver22:~$ sudo ip addr add 2001:db8:0:abcd:0:0:0:7334/64 dev enp0s3
[sudo] password for alain:
alain@ubuntuserver22:~$ ip addr show | grep inet6
    inet6 ::1/128 scope host
    inet6 2001:db8:0:abcd::7334/64 scope global
    inet6 fe80::a00:27ff:feef:7209/64 scope link
	
#-- It works
alain@ubuntuserver22:~$ ping6 -c 3 2001:db8:0:abcd:0:0:0:7334
PING 2001:db8:0:abcd:0:0:0:7334(2001:db8:0:abcd::7334) 56 data bytes
64 bytes from 2001:db8:0:abcd::7334: icmp_seq=1 ttl=64 time=0.105 ms
64 bytes from 2001:db8:0:abcd::7334: icmp_seq=2 ttl=64 time=0.057 ms
64 bytes from 2001:db8:0:abcd::7334: icmp_seq=3 ttl=64 time=0.058 ms
	
#--UBUNTU SERVER DNS : The resolvers that Linux uses to look up DNS data are configured in the /etc/resolv.conf configuration file
alain@ubuntuserver22:~$ sudo cat /etc/resolv.conf
# This is /run/systemd/resolve/stub-resolv.conf managed by man:systemd-resolved(8).
# Do not edit.
#
# This file might be symlinked as /etc/resolv.conf. If you're looking at
# /etc/resolv.conf and seeing this text, you have followed the symlink.
#
# This is a dynamic resolv.conf file for connecting local clients to the
# internal DNS stub resolver of systemd-resolved. This file lists all
# configured search domains.
#
# Run "resolvectl status" to see details about the uplink DNS servers
# currently in use.
#
# Third party programs should typically not access this file directly, but only
# through the symlink at /etc/resolv.conf. To manage man:resolv.conf(5) in a
# different way, replace this symlink by a static file or a different symlink.
#
# See man:systemd-resolved.service(8) for details about the supported modes of
# operation for /etc/resolv.conf.


alain@ubuntuserver22:~$ cat /run/systemd/resolve/stub-resolv.conf
# This is /run/systemd/resolve/stub-resolv.conf managed by man:systemd-resolved(8).
# Do not edit.
#
# This file might be symlinked as /etc/resolv.conf. If you're looking at
# /etc/resolv.conf and seeing this text, you have followed the symlink.
#
# This is a dynamic resolv.conf file for connecting local clients to the
# internal DNS stub resolver of systemd-resolved. This file lists all
# configured search domains.
#
# Run "resolvectl status" to see details about the uplink DNS servers
# currently in use.
#
# Third party programs should typically not access this file directly, but only
# through the symlink at /etc/resolv.conf. To manage man:resolv.conf(5) in a
# different way, replace this symlink by a static file or a different symlink.
#
# See man:systemd-resolved.service(8) for details about the supported modes of
# operation for /etc/resolv.conf.

nameserver 127.0.0.53
options edns0 trust-ad
search .


#-- DEBIAN 'DNS resolver'
alain@debianvm11:~$ cat /etc/resolv.conf
nameserver 212.230.135.1
nameserver 212.230.135.2


#--UBUNTU SERVER Host DNS:
#-- When the resolver performs a name lookup, it first checks the /etc/hosts file to see if it contains an address for the requested name
#-- '/etc/hosts'
alain@ubuntuserver22:~$ cat /etc/hosts
127.0.0.1 localhost
127.0.1.1 osboxes
# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

#--'/etc/hostname'
alain@ubuntuserver22:~$ cat /etc/hostname
ubuntu_server_22

#-- '/etc/host.conf'
alain@ubuntuserver22:~$ cat /etc/host.conf
# The "order" line is only used by old versions of the C library.
order hosts,bind
multi on

#-- /etc/hosts.allow
alain@ubuntuserver22:~$ cat /etc/hosts.allow
# /etc/hosts.allow: list of hosts that are allowed to access the system.
#                   See the manual pages hosts_access(5) and hosts_options(5).
#
# Example:    ALL: LOCAL @some_netgroup
#             ALL: .foobar.edu EXCEPT terminalserver.foobar.edu
#
# If you're going to protect the portmapper use the name "rpcbind" for the
# daemon name. See rpcbind(8) and rpc.mountd(8) for further information.
#

#--/etc/hosts.deny
alain@ubuntuserver22:~$ cat /etc/hosts.deny
# /etc/hosts.deny: list of hosts that are _not_ allowed to access the system.
#                  See the manual pages hosts_access(5) and hosts_options(5).
#
# Example:    ALL: some.host.name, .some.domain
#             ALL EXCEPT in.fingerd: other.host.name, .other.domain
#
# If you're going to protect the portmapper use the name "rpcbind" for the
# daemon name. See rpcbind(8) and rpc.mountd(8) for further information.
#
# The PARANOID wildcard matches any host whose name does not match its
# address.
#
# You may wish to enable this to ensure any programs that don't
# validate looked up hostnames still leave understandable logs. In past
# versions of Debian this has been the default.
# ALL: PARANOID




#--DEBIAN Host DNS:
#-- When the resolver performs a name lookup, it first checks the /etc/hosts file to see if it contains an address for the requested name
alain@debianvm11:~$ cat /etc/hosts
127.0.0.1       localhost
127.0.1.1       osboxes

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters


alain@debianvm11:~$ alain@debianvm11:~$ cat /etc/hosts
127.0.0.1       localhost
127.0.1.1       osboxes

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
^C
alain@debianvm11:~$ cat /etc/host.conf
multi on
alain@debianvm11:~$ cat /etc/hostname
debian_vm_11

#-- To perform a lookup in the DNS, use the command host
#-- google.es
alain@ubuntuserver22:~$ host google.es
google.es has address 142.250.201.67
google.es has IPv6 address 2a00:1450:4003:80c::2003
google.es mail is handled by 0 smtp.google.com.
#--splav-ural.ru
alain@ubuntuserver22:~$ host splav-ural.ru
splav-ural.ru has address 77.222.57.82
splav-ural.ru mail is handled by 20 mx2.spaceweb.ru.
splav-ural.ru mail is handled by 10 mx1.spaceweb.ru.

#--splav-ural.ru with nslookup
alain@ubuntuserver22:~$ nslookup splav-ural.ru
Server:         127.0.0.53
Address:        127.0.0.53#53

Non-authoritative answer:
Name:   splav-ural.ru
Address: 77.222.57.82

#-- More detailed information can be retrieved using the command dig:
alain@debianvm11:~$ dig intermarche.fr

; <<>> DiG 9.16.44-Debian <<>> intermarche.fr
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 43074
;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 512
;; QUESTION SECTION:
;intermarche.fr.                        IN      A

;; ANSWER SECTION:
intermarche.fr.         3335    IN      A       81.255.44.177
intermarche.fr.         3335    IN      A       91.237.184.177

;; Query time: 3 msec
;; SERVER: 212.230.135.1#53(212.230.135.1)
;; WHEN: Fri Dec 01 07:04:59 EST 2023
;; MSG SIZE  rcvd: 75

# -- DNS 'bind' example on Debian
alain@debianvm11:~$ ll /etc/bind
total 48
-rw-r--r-- 1 root root 1991 Sep 21 13:30 bind.keys
-rw-r--r-- 1 root root  237 Sep 21 13:30 db.0
-rw-r--r-- 1 root root  271 Sep 21 13:30 db.127
-rw-r--r-- 1 root root  237 Sep 21 13:30 db.255
-rw-r--r-- 1 root root  353 Sep 21 13:30 db.empty
-rw-r--r-- 1 root root  270 Sep 21 13:30 db.local
-rw-r--r-- 1 root bind  463 Sep 21 13:30 named.conf
-rw-r--r-- 1 root bind  498 Sep 21 13:30 named.conf.default-zones
-rw-r--r-- 1 root bind  165 Sep 21 13:30 named.conf.local
-rw-r--r-- 1 root bind  846 Sep 21 13:30 named.conf.options
-rw-r----- 1 bind bind  100 Dec  1 09:05 rndc.key
-rw-r--r-- 1 root root 1317 Sep 21 13:30 zones.rfc1918
alain@debianvm11:~$ cat /etc/db.local
cat: /etc/db.local: No such file or directory
alain@debianvm11:~$ cat /etc/bind/db.local
;
; BIND data file for local loopback interface
;
$TTL    604800
@       IN      SOA     localhost. root.localhost. (
                              2         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
@       IN      NS      localhost.
@       IN      A       127.0.0.1
@       IN      AAAA    ::1
alain@debianvm11:~$ cat /etc/bind/db.empty
; BIND reverse data file for empty rfc1918 zone
;
; DO NOT EDIT THIS FILE - it is used for multiple zones.
; Instead, copy it, edit named.conf, and use that copy.
;
$TTL    86400
@       IN      SOA     localhost. root.localhost. (
                              1         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                          86400 )       ; Negative Cache TTL
;
@       IN      NS      localhost.





#--Sockets: A socket is a communication endpoint for two programs talking to each other. 
#--Unix Sockets: Which connect processes running on the same device.
#-- UDP (User Datagram Protocol) Sockets : Which connect applications using a protocol which is fast but not resilient.
#-- TCP (Transmission Control Protocol) Sockets Which are more reliable than UDP sockets and, for example, confirm the receipt of data

#-- -t allow the administrator to select TCP
-u allow the administrator to select TCP or UDP sockets and
alain@debianvm11:~$ ss -t
State       Recv-Q       Send-Q              Local Address:Port               Peer Address:Port        Process
ESTAB       0            0                       10.0.2.17:ssh                    10.0.2.2:58831

#-- -u allow the administrator to select UDP
alain@debianvm11:~$ ss -u
Recv-Q         Send-Q                 Local Address:Port                  Peer Address:Port          Process
0              0                              [::1]:49288                        [::1]:49288

#-- -p option includes information on the process using each socket
alain@debianvm11:~$ ss -p
Netid     State      Recv-Q     Send-Q                       Local Address:Port                Peer Address:Port     Process
u_str     ESTAB      0          0              /run/dbus/system_bus_socket 11701                          * 11692    
u_str     ESTAB      0          0                                        * 12543                          * 0        
u_str     ESTAB      0          0                                        * 11581                          * 11582   
....

#--The –s option shows a summary of sockets
alain@debianvm11:~$ ss -s
Total: 93
TCP:   6 (estab 1, closed 0, orphaned 0, timewait 0)

Transport Total     IP        IPv6
RAW       1         1         0
UDP       1         0         1
TCP       6         4         2
INET      8         5         3
FRAG      0         0         0


alain@debianvm11:~$ ss -l
Netid State  Recv-Q Send-Q                              Local Address:Port                Peer Address:Port  Process
nl    UNCONN 0      0                                            rtnl:kernel                          *
nl    UNCONN 4352   0                                         tcpdiag:ss/1819                         *
nl    UNCONN 768    0                                         tcpdiag:kernel                          *
nl    UNCONN 0      0                                         selinux:kernel                          *
....

#--See only IPv4 sockets DEBIAN
alain@debianvm11:~$ ss -4
Netid     State      Recv-Q     Send-Q         Local Address:Port                 Peer Address:Port      Process
???       UNCONN     0          0                    0.0.0.0:ipproto-255               0.0.0.0:*
tcp       ESTAB      0          0                  10.0.2.17:ssh                      10.0.2.2:58831

#--See only IPv4 sockets UBUNTU SERVER
alain@ubuntuserver22:~$ ss -4
Netid     State      Recv-Q     Send-Q          Local Address:Port                  Peer Address:Port      Process
???       UNCONN     0          0                     0.0.0.0:ipproto-255                0.0.0.0:*
tcp       ESTAB      0          0                   10.0.2.16:ssh                       10.0.2.2:58815


#-- When executed without any options, the command shows a list of all established sockets
alain@debianvm11:~$ ss
Netid    State     Recv-Q    Send-Q                     Local Address:Port              Peer Address:Port    Process
u_str    ESTAB     0         0            /run/dbus/system_bus_socket 11701                        * 11692
u_str    ESTAB     0         0                                      * 12543                        * 0
u_str    ESTAB     0         0                                      * 11581                        * 11582
u_str    ESTAB     0         0            /run/systemd/journal/stdout 11582                        * 11581
u_str    ESTAB     0         0                                      * 11570                        * 11571
u_str    ESTAB     0         0            /run/systemd/journal/stdout 11571                        * 11570
u_str    ESTAB     0         0            /run/dbus/system_bus_socket 12497                        * 12496
u_str    ESTAB     0         0                                      * 14089                        * 14090
u_str    ESTAB     0         0                                      * 14128                        * 14129
u_str    ESTAB     0         0            /run/systemd/journal/stdout 14129                        * 14128
u_str    ESTAB     0         0            /run/systemd/journal/stdout 11474                        * 11473
u_str    ESTAB     0         0                                      * 11485                        * 11486
u_str    ESTAB     0         0                                      * 11473                        * 11474
u_str    ESTAB     0         0            /run/systemd/journal/stdout 11000                        * 10869
u_str    ESTAB     0         0                                      * 11463                        * 11646
u_str    ESTAB     0         0            /run/dbus/system_bus_socket 11646                        * 11463
u_str    ESTAB     0         0                                      * 12496                        * 12497
u_str    ESTAB     0         0                                      * 10869                        * 11000
u_str    ESTAB     0         0            /run/systemd/journal/stdout 14090                        * 14089
u_str    ESTAB     0         0                                      * 11692                        * 11701
u_str    ESTAB     0         0            /run/dbus/system_bus_socket 11649                        * 11648
u_str    ESTAB     0         0                                      * 11644                        * 11643
u_str    ESTAB     0         0                                      * 11643                        * 11644
u_str    ESTAB     0         0                                      * 11648                        * 11649
u_str    ESTAB     0         0                                      * 12579                        * 12580
u_str    ESTAB     0         0            /run/systemd/journal/stdout 12450                        * 12449
u_str    ESTAB     0         0            /run/systemd/journal/stdout 11813                        * 11812
u_str    ESTAB     0         0            /run/systemd/journal/stdout 11323                        * 11322
u_str    ESTAB     0         0                                      * 11454                        * 11645
u_str    ESTAB     0         0                                      * 11812                        * 11813
u_str    ESTAB     0         0                                      * 12449                        * 12450
u_str    ESTAB     0         0                                      * 11322                        * 11323
u_str    ESTAB     0         0                                      * 12580                        * 12579
u_str    ESTAB     0         0            /run/dbus/system_bus_socket 11645                        * 11454
u_str    ESTAB     0         0            /run/systemd/journal/stdout 11486                        * 11485
???      UNCONN    0         0                                0.0.0.0:ipproto-255            0.0.0.0:*
udp      ESTAB     0         0                                  [::1]:49288                    [::1]:49288
tcp      ESTAB     0         0                              10.0.2.17:ssh                   10.0.2.2:58831

#--'ss' Other example combination : t = TCP, s=socket, 4= Ipv4, l=LISTEN for new connexion 

alain@debianvm11:~$ ss -t -4 -s -l
Total: 117
TCP:   14 (estab 2, closed 0, orphaned 0, timewait 0)

Transport Total     IP        IPv6
RAW       3         2         1
UDP       6         3         3
TCP       14        9         5
INET      23        14        9
FRAG      0         0         0

State        Recv-Q       Send-Q             Local Address:Port                   Peer Address:Port      Process
LISTEN       0            511                      0.0.0.0:http                        0.0.0.0:*
LISTEN       0            10                     10.0.2.24:domain                      0.0.0.0:*
LISTEN       0            10                     10.0.2.17:domain                      0.0.0.0:*
LISTEN       0            10                     127.0.0.1:domain                      0.0.0.0:*
LISTEN       0            128                      0.0.0.0:ssh                         0.0.0.0:*
LISTEN       0            244                    127.0.0.1:postgresql                  0.0.0.0:*
LISTEN       0            4096                   127.0.0.1:953                         0.0.0.0:*


# -- 5.1 Basic Security and Identifying User Types

#--'/sbin/nologin' is used as an invalid shell. This may be purposeful, if the user will only be authenticated for services other than console or SSH access, e.g., Secure FTP (sftp) access only.
alain@ubuntuserver22:~$ cat /etc/passwd | grep ssh
sshd:x:106:65534::/run/sshd:/usr/sbin/nologin

#-- Identifiers (UIDs/GIDs) = 64bits

#-- System account UID/GID <100 (2-digit) or <500-1000 (3-digit) 
alain@ubuntuserver22:~$ cat /etc/passwd | grep system
systemd-network:x:101:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin
systemd-resolve:x:102:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin
systemd-timesync:x:104:105:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin




#-- Service account UID/GID >1000 (4+ digit), but not a “standard” or “regular” user account, an account for services, with an UID/GID >1000 (4+ digits)

#-- The Superuser Account UID = 0 and GID = 0
alain@ubuntuserver22:~$ cat /etc/passwd | grep root
root:x:0:0:root:/root:/bin/bash

#-- Access Control Files
#---- '/etc/passwd' - This file stores basic information about the users on the system, including UID and GID, home directory, shell, etc. Despite the name, no passwords are stored here.
#----'/etc/group' - This file stores basic information about all user groups on the system, like group name and GID and members.

alain@ubuntuserver22:~$ cat /etc/group | grep alain
alain:x:1001:


#----'/etc/shadow' - This is where user passwords are stored. They are hashed, for security.
#------ Syntax : USERNAME:PASSWORD:LASTCHANGE:MINAGE:MAXAGE:WARN:INACTIVE:EXPDATE
#------ example LASTCHANGE = 19661
alain@ubuntuserver22:~$ sudo cat /etc/shadow | grep alain
[sudo] password for alain:
alain:$y$j9T$7NMKv6uLAx8dJTYb6eslz/$njw6/OnZmPrftA9b/j/llsiTvV.l9N7OSEt0cNY9NQA:19661:0:99999:7:::


!! -- This means a “disabled” account (no authentication possible), with no password hash stored.sh
#------A “disabled” account, get '!' character: !$1$01234567$ABC… and an enabled account get the '$' character : $1$01234567$ABC…


#----'/etc/gshadow' - This file stores more detailed information about groups, including a hashed password which lets users temporarily become a member of the group, a list of users who can become
alain@ubuntuserver22:~$ sudo cat /etc/gshadow | grep alain
alain:!::




#-- A user can change his login shell using the chsh command

alain@ubuntuserver22:~$ chsh
Password:
Changing the login shell for alain
Enter the new value, or press ENTER for the default
  Login Shell [/bin/bash]: alain
chsh: alain is an invalid shell

#--non-interactive mode, with the -s parameter followed by the path to the binary, like so:
alain@ubuntuserver22:~$ chsh -s /usr/bin/zsh
Password:
chsh: /usr/bin/zsh is an invalid shell

#--Getting Information About Your Users : command 'id'

alain@ubuntuserver22:~$ id
uid=1001(alain) gid=1001(alain) groups=1001(alain)

#--UID = User ID (UID), followed by the username, here '1001'
#--GID = the primary Group ID (GID), followed by the groupname (common name) in parenthesis, here '1001'

#--The commands who and w list only the active logins on the system:
#--'who'
alain@ubuntuserver22:~$ who
alain    pts/0        2023-12-04 14:44 (10.0.2.2)


#--'w'
alain@ubuntuserver22:~$ w
 14:54:55 up 55 min,  1 user,  load average: 0.00, 0.00, 0.00
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
alain    pts/0    10.0.2.2         14:44    7.00s  0.16s  0.00s w
#--'w'
#--• The current time and how long the system has been up
#--• How many users are connected
#--• The load averages for the past 1, 5 and 15 minutes

#--The dollar symbol ($) should terminate the command line prompt for a non-privileged user shell,while the pound symbol (#) should terminate the command line prompt for the superuser (root)

alain@ubuntuserver22:~$ cat /sys/devices/virtual/dmi/id/board_serial
cat: /sys/devices/virtual/dmi/id/board_serial: Permission denied
alain@ubuntuserver22:~$ sudo cat /sys/devices/virtual/dmi/id/board_serial
[sudo] password for alain:
0

#-- controls who can use the sudo command, and how.
#-- Even though /etc/sudoers is a text file, it should never be edited directly. If any changes to its contents are needed, they should be made using the visudo utility
alain@ubuntuserver22:~$ sudo cat /etc/sudoers
#
# This file MUST be edited with the 'visudo' command as root.
#
# Please consider adding local content in /etc/sudoers.d/ instead of
# directly modifying this file.
#
# See the man page for details on how to write a sudoers file.
#
Defaults        env_reset
Defaults        mail_badpass
Defaults        secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"
Defaults        use_pty
....

#-- may contain files that supplement the settings on the sudoers file
alain@ubuntuserver22:~$ sudo cat /etc/sudoers.d/README
#
# The default /etc/sudoers file created on installation of the
# sudo  package now includes the directive:
#
#       @includedir /etc/sudoers.d
....


#--/etc/passwd -- USERNAME:PASSWORD:UID:GID:GECOS:HOMEDIR:SHELL
#-- Legacy location of the password hash. Almost always x, indicating that the password is stored in the file '/etc/shadow'.
alain@ubuntuserver22:~$ sudo cat /etc/passwd | grep x
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin

#-- See '/etc/shadow' with 'x' 
alain@ubuntuserver22:~$ sudo cat /etc/shadow
[sudo] password for alain:
root:*:19103:0:99999:7:::
daemon:*:19103:0:99999:7:::
bin:*:19103:0:99999:7:::
sys:*:19103:0:99999:7:::
sync:*:19103:0:99999:7:::
games:*:19103:0:99999:7:::
man:*:19103:0:99999:7:::
lp:*:19103:0:99999:7:::
mail:*:19103:0:99999:7:::
news:*:19103:0:99999:7:::
uucp:*:19103:0:99999:7:::
proxy:*:19103:0:99999:7:::
www-data:*:19103:0:99999:7:::
backup:*:19103:0:99999:7:::
list:*:19103:0:99999:7:::
irc:*:19103:0:99999:7:::
gnats:*:19103:0:99999:7:::
nobody:*:19103:0:99999:7:::
_apt:*:19103:0:99999:7:::
systemd-network:*:19103:0:99999:7:::


#--'/etc/passwd'
alain@ubuntuserver22:~$ sudo cat /etc/passwd | grep alain
alain:x:1001:1001:,,,:/home/alain:/bin/bash

#--'/etc/passwd' details:
#-- USERNAME The username aka login (name), like root, nobody, emma, alain
#-- UID -> User ID (UID), like 0, 99, 1024.
#-- GID -> Default Group ID (GID), like 0, 99, 1024.
#--GECOS ->A CSV list of user information including name, location, phone number. For example: EmmaSmith,42 Douglas St,555.555.5555
#--HOMEDIR -> Path to the user’s home directory, like /root, /home/emma, /home/alain
#-- SHELL -> The default shell for this user, like /bin/bash, /sbin/nologin, /bin/ksh, etc.

#-- Understanding the GECOS Field: The GECOS field contains three (3) or more fields, delimited by a comma (,), aka a list of Comma Separated Values (CSV). Although there is no enforced standard, the fields are usually in the following order: NAME,LOCATION,CONTACT

#--NAME--> is the user’s “Full Name”, or the “Software Name” in the case of a service account.
#--LOCATION -- >is usually the user’s physical location within a building, room number or the contact



# -- To change the information on the GECOS field, use the 'chfn' command and answer the questions, like below.
alain@ubuntuserver22:~$ chfn
Password:
Changing the user information for alain
Enter the new value, or press ENTER for the default
        Full Name:
        Room Number []: 31
        Work Phone []: 777777777777
        Home Phone []: 777766666666
alain@ubuntuserver22:~$ sudo cat /etc/passwd | grep alain
alain:x:1001:1001:,31,777777777777,777766666666:/home/alain:/bin/bash

# -- To change the information on the GECOS field, use the 'chfn' 'suer' command and answer the questions, like below.
alain@ubuntuserver22:~$ chfn osboxes
chfn: Permission denied.
alain@ubuntuserver22:~$ sudo chfn osboxes
Changing the user information for osboxes
Enter the new value, or press ENTER for the default
        Full Name [osboxes.org]: Robot
        Room Number []: 41
        Work Phone []: 444444444477777
        Home Phone []: 666666644444444
        Other []: Roboto
		
		
#-- '/etc/group' -- NAME:PASSWORD:GID:MEMBERS -- The /etc/group file contains fields always delimited by a colon (:), storing basic information about the groups on the system. It is sometimes called the “group file”. The syntax for each line is:		
alain@ubuntuserver22:~$ sudo cat /etc/group | grep alain
alain:x:1001:


#--Exercice -- 1. Compare the results of last to w and who. What details are missing from each other.
alain@ubuntuserver22:~$ w
 10:52:11 up  1:24,  1 user,  load average: 0.00, 0.00, 0.00
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
alain    pts/0    10.0.2.2         09:28    0.00s  0.13s  0.00s w

alain@ubuntuserver22:~$ last -n 1
alain    pts/0        10.0.2.2         Tue Dec  5 09:28   still logged in

wtmp begins Sat Apr 23 01:05:00 2022
alain@ubuntuserver22:~$ who
alain    pts/0        2023-12-05 09:28 (10.0.2.2)


#-- Create a new user and chose its UID GUID
alain@ubuntuserver22:~$ sudo useradd korin -u 1222


alain@ubuntuserver22:~$ cat /etc/passwd | grep korin
korin:x:1222:1222::/home/korin:/bin/sh

#-- '/etc/skel' -- When you add a new user account, even creating its home directory, the newly created home directory is populated with files and folders that are copied from the skeleton directory

#-- see also /etc/login.defs

#--'usermod' -- The syntax for the usermod command is: usermod -a -G groupname username

#--add alain to korin group
alain@ubuntuserver22:~$ sudo usermod -aG korin alain
alain@ubuntuserver22:~$ cat /etc/group | grep alain
alain:x:1001:
korin:x:1222:alain

#--add alain to alain group
alain@ubuntuserver22:~$ sudo usermod -aG alain alain
alain@ubuntuserver22:~$ cat /etc/group | grep alain
alain:x:1001:alain
korin:x:1222:alain

#--add osboxes to korin group
alain@ubuntuserver22:~$ sudo usermod -aG korin osboxes
alain@ubuntuserver22:~$ cat /etc/group | grep korin
korin:x:1222:alain,osboxes


#--Request User to change passwd
alain@ubuntuserver22:~$ sudo cat /etc/shadow | grep korin
korin:!:19696:0:99999:7:::
alain@ubuntuserver22:~$ sudo passwd -e korin
passwd: password expiry information changed.
alain@ubuntuserver22:~$ sudo cat /etc/shadow | grep korin
korin:!:0:0:99999:7:::

#-- EXAMPLE 'groupadd' + GUID 'useradd' + UID
alain@ubuntuserver22:~$ sudo groupadd rambobine -g 4444
alain@ubuntuserver22:~$ sudo useradd ramo -u 1036 -g 4444
alain@ubuntuserver22:~$ cat /etc/passwd | grep ram
ramo:x:1036:4444::/home/ramo:/bin/sh
alain@ubuntuserver22:~$ cat /etc/group | grep ram
rambobine:x:4444:

#--see my group 'groups'
alain@ubuntuserver22:~$ groups
alain


#--EXAMPLE 'useradd' -- create a user and attach this user to the groups sys_admin main group and secondary groups web_admin and db_admin: 
root@ubuntuserver22:/# cat /etc/group | grep admin
sys_admin:x:1224:
web_admin:x:1225:
db_admin:x:1226:

# User 'ekatia' with group name
root@ubuntuserver22:/# useradd -u 1338 -g 1224 -G web_admin,db_admin ekatia

# User 'boby' with group number
root@ubuntuserver22:/# useradd -u 1340 -g 1224 -G 1225,1226 boby

root@ubuntuserver22:/# cat /etc/group | grep admin
sys_admin:x:1224:
web_admin:x:1225:ekatia,boby
db_admin:x:1226:ekatia,boby

#--5.3 Managing File Permissions and Ownership --   page 391        --

#-- To avoid this and query information about the directory itself ----> 
alain@ubuntuserver22:~$ ls -lh
total 256K
drwxrwxr-x 2 alain alain 4.0K Nov 28 13:02  3_2_redirect_error
drwxrwxr-x 2 alain alain 4.0K Nov 23 15:40  3_3_bash_script
drwxrwxr-x 3 alain alain 4.0K Dec  7 13:51  dir
drwxrwxr-x 2 alain alain 4.0K Dec  7 13:51  dir2
drwxrwxr-x 2 alain alain 4.0K Dec  7 13:51 'dir dir2'
drwxrwxr-x 3 alain alain 4.0K Nov 13 15:39  Documents
-rw-r--r-- 1 alain alain  57K Nov 29 13:58 'ee every process on the system using standard syntax:'
-rw-r--r-- 1 alain alain  13K Nov 29 15:01 'eeing messages from other users and the system.'
-rw-r--r-- 1 alain alain 126K Nov 29 15:01 'erver22:~$ journalctl'
-rw-rw-r-- 1 alain alain  13K Nov 29 15:29  htop.txt
drwxrwxr-x 7 alain alain 4.0K Nov 16 09:57  linux_essentials-3.1
-rw-rw-r-- 1 alain alain   90 Dec  7 13:58  ps.txt
drwxrwxr-x 3 alain alain 4.0K Nov 13 16:52 'this is a test'
.
#-- ----> , add the -d parameter to ls:
alain@ubuntuserver22:~$ ls -ld
drwxr-x--- 12 alain alain 4096 Dec 11 12:24 .

#-- Seeing Hidden Files -- use '-a'

alain@ubuntuserver22:~$ ls -al
total 352
drwxr-x--- 12 alain alain   4096 Dec 11 12:24  .
drwxr-xr-x  5 root  root    4096 Oct 31 10:42  ..
drwxrwxr-x  2 alain alain   4096 Nov 28 13:02  3_2_redirect_error
drwxrwxr-x  2 alain alain   4096 Nov 23 15:40  3_3_bash_script
-rw-------  1 alain alain  48570 Dec  7 16:44  .bash_history
-rw-r--r--  1 alain alain    220 Oct 31 10:42  .bash_logout
-rw-r--r--  1 alain alain   3771 Oct 31 10:42  .bashrc
drwx------  2 alain alain   4096 Oct 31 10:54  .cache
drwx------  4 alain alain   4096 Nov 29 15:29  .config
drwxrwxr-x  3 alain alain   4096 Dec  7 13:51  dir
drwxrwxr-x  2 alain alain   4096 Dec  7 13:51  dir2
drwxrwxr-x  2 alain alain   4096 Dec  7 13:51 'dir dir2'
drwxrwxr-x  3 alain alain   4096 Nov 13 15:39  Documents
-rw-r--r--  1 alain alain  58233 Nov 29 13:58 'ee every process on the system using standard syntax:'
-rw-r--r--  1 alain alain  13067 Nov 29 15:01 'eeing messages from other users and the system.'
-rw-r--r--  1 alain alain 128715 Nov 29 15:01 'erver22:~$ journalctl'
-rw-rw-r--  1 alain alain  12304 Nov 29 15:29  htop.txt
-rw-------  1 alain alain     45 Dec 11 12:24  .lesshst
drwxrwxr-x  7 alain alain   4096 Nov 16 09:57  linux_essentials-3.1
-rw-r--r--  1 alain alain    807 Oct 31 10:42  .profile
-rw-rw-r--  1 alain alain     90 Dec  7 13:58  ps.txt
drwxrwxr-x  3 alain alain   4096 Nov 13 16:52 'this is a test'
-rw-------  1 alain alain  13127 Dec  5 11:18  .viminfo


#-- Modifying File Ownership with 'chown'
#--Syntax : chown username:groupname filename
#-- the user who owns a file does not need to belong to the group who owns a file

alain@ubuntuserver22:~/5_3_play_permission$ sudo chown korin:alain text3.txt
[sudo] password for alain:
alain@ubuntuserver22:~/5_3_play_permission$ ls -al
total 12
drwxrwxr-x  3 alain alain 4096 Dec 12 10:13 .
drwxr-x--- 13 alain alain 4096 Dec 12 10:00 ..
drwxrwxr-x  2 alain alain 4096 Dec 12 09:13 Another_Directory
-rwxrwxr-x  1 alain alain    0 Dec 12 09:34 text2.txt
-rwxrwxr-x  1 korin alain    0 Dec 12 10:13 text3.txt
-rwxrwxrwx  1 alain alain    0 Dec 12 09:15 text.txt

alain@ubuntuserver22:~/5_3_play_permission$ sudo chown ekatia:alain text2.txt
alain@ubuntuserver22:~/5_3_play_permission$ ls -al
total 12
drwxrwxr-x  3 alain  alain 4096 Dec 12 10:13 .
drwxr-x--- 13 alain  alain 4096 Dec 12 10:00 ..
drwxrwxr-x  2 alain  alain 4096 Dec 12 09:13 Another_Directory
-rwxrwxr-x  1 ekatia alain    0 Dec 12 09:34 text2.txt
-rwxrwxr-x  1 korin  alain    0 Dec 12 10:13 text3.txt
-rwxrwxrwx  1 alain  alain    0 Dec 12 09:15 text.txt

alain@ubuntuserver22:~/5_3_play_permission$ sudo chown ekatia:korin text.txt
alain@ubuntuserver22:~/5_3_play_permission$ ls -al
total 12
drwxrwxr-x  3 alain  alain 4096 Dec 12 10:13 .
drwxr-x--- 13 alain  alain 4096 Dec 12 10:00 ..
drwxrwxr-x  2 alain  alain 4096 Dec 12 09:13 Another_Directory
-rwxrwxr-x  1 ekatia alain    0 Dec 12 09:34 text2.txt
-rwxrwxr-x  1 korin  alain    0 Dec 12 10:13 text3.txt
-rwxrwxrwx  1 ekatia korin    0 Dec 12 09:15 text.txt


#-- Querying Groups
# -- 'groups' on sytem
alain@ubuntuserver22:~$ groups
alain korin

#--'groups' according user
alain@ubuntuserver22:~$ groups ekatia
ekatia : sys_admin web_admin db_admin
alain@ubuntuserver22:~$ groups alain
alain : alain korin web_admin
alain@ubuntuserver22:~$ groups korin
korin : korin

#--'groups' according group - not working
alain@ubuntuserver22:~$ groups web_admin
groups: ‘web_admin’: no such user

#--displaying which users belong to a group, use 'groupmems'. The parameter -g specifies the group, and -l will list all of its members:

root@ubuntuserver22:/home/alain# groupmems -g alain
Password:
groupmems: PAM: Authentication failure

#--Sticky Bit : restricted deletion flag, has the octal value 1 and in symbolic mode is represented by a 't'
#-- !!! prevents users from removing or renaming a file in a directory unless they own that file!!! the sticky bit (value 1) for the directory Another_Directory in numeric mode, with permissions 755, the command would be:
alain@ubuntuserver22:~/5_3_play_permission$ chmod 1755 Another_Directory/
alain@ubuntuserver22:~/5_3_play_permission$ ls -ld Another_Directory/
drwxr-xr-t 2 alain alain 4096 Dec 12 09:13 Another_Directory/


# -- Set GID : it will grant the process resulting from executing the file access to the privileges of the group who owns the file. When applied to directories, it will make every file or directory created under it inherit the group from the parent directory

#-- add SGID permissions
alain@ubuntuserver22:~/5_3_play_permission$ chmod g+s test.sh

#-- then the file is in symbolic mode 'S' for special permission, replacing the 'x'
alain@ubuntuserver22:~/5_3_play_permission$ ll -l
....
-rwxrwSr--  1 alain  alain   33 Dec 12 13:14 test.sh*
....

#-- Set UID : 's' on the user permissions in symbolic mode. It only applies to files and its behavior is similar to the SGID bit, but the process will run with the privileges of the user who owns the file

#--> SUID User ID, has the octal value 4
#--> GUID Group ID, has the octal value 2


#-- Set SGUD (value 2) and SUID (value 4) in numeric mode
alain@ubuntuserver22:~/5_3_play_permission$ chmod 6755 test.sh
alain@ubuntuserver22:~/5_3_play_permission$ ll -l
total 16
drwxrwxr-x  3 alain  alain 4096 Dec 12 13:14 ./
drwxr-x--- 13 alain  alain 4096 Dec 12 13:14 ../
drwxr-sr-t  2 alain  alain 4096 Dec 12 13:50 Another_Directory/
-rwsr-sr-x  1 alain  alain   33 Dec 12 13:14 test.sh*

#-- Other EXAMPLE 'chmod' 's' for both user and group
alain@ubuntuserver22:~/5_3_play_permission$ ll -h
total 16K
drwxrwxr-x  3 alain  alain 4.0K Dec 12 13:54 ./
drwxr-x--- 13 alain  alain 4.0K Dec 12 13:14 ../
drwxr-sr-t  2 alain  alain 4.0K Dec 12 13:50 Another_Directory/
-rw-rw-r--  1 alain  alain    0 Dec 12 13:54 batman.txt
....


alain@ubuntuserver22:~/5_3_play_permission$ chmod 6755 batman.txt
alain@ubuntuserver22:~/5_3_play_permission$ ll -l
total 16
drwxrwxr-x  3 alain  alain 4096 Dec 12 13:54 ./
drwxr-x--- 13 alain  alain 4096 Dec 12 13:14 ../
drwxr-sr-t  2 alain  alain 4096 Dec 12 13:50 Another_Directory/
-rwsr-sr-x  1 alain  alain    0 Dec 12 13:54 batman.txt*

#-- EXAMPLE of setting special permissions 's'

alain@ubuntuserver22:~/5_3_play_permission$ ll -l
....
-rwxr--r--  1 alain  alain   33 Dec 12 13:14 test.sh*
....
#-- 's' to user only, we use '4'
alain@ubuntuserver22:~/5_3_play_permission$ chmod 4700 test.sh
alain@ubuntuserver22:~/5_3_play_permission$ ls -l
....
-rws------ 1 alain  alain   33 Dec 12 13:14 test.sh
....

#-- 's' to user AND group, we use '6' (6 = 4 + 2) -- if it was group only it would be '2'
alain@ubuntuserver22:~/5_3_play_permission$ chmod 6700 test.sh
alain@ubuntuserver22:~/5_3_play_permission$ ls -l
total 16
drwxr-sr-t 2 alain  alain 4096 Dec 12 13:50 Another_Directory
-rwsr-sr-x 1 alain  alain    0 Dec 12 13:54 batman.txt
drwxrwxr-x 2 alain  korin 4096 Dec 12 14:37 Box
drwxrwxr-x 2 alain  alain 4096 Dec 12 14:33 emptydir
-rws--S--- 1 alain  alain   33 Dec 12 13:14 test.sh
-rwx------ 1 ekatia alain    0 Dec 12 09:34 text2.txt
-rwxrwsr-t 1 korin  alain    0 Dec 12 10:13 text3.txt
-rwxrwxrwx 1 ekatia korin    0 Dec 12 09:15 text.txt


#-- 'chmod' reads the value “backwards”, from the least significant digit (others) to the most significant one (user).
alain@ubuntuserver22:~/5_3_play_permission$ ls -l toto.txt
-rw-rw-r-- 1 alain alain 0 Dec 12 14:53 toto.txt
alain@ubuntuserver22:~/5_3_play_permission$ chmod 44 toto.txt
alain@ubuntuserver22:~/5_3_play_permission$ ls -l toto.txt
----r--r-- 1 alain alain 0 Dec 12 14:53 toto.txt


#-- Combine 'find' 'perm' and More
#-- -- permision execute for others and owned by 'alain' user
alain@ubuntuserver22:~$ find /home/alain/5_3_play_permission/ -perm -o=x -user alain
/home/alain/5_3_play_permission/
/home/alain/5_3_play_permission/emptydir
/home/alain/5_3_play_permission/Box
/home/alain/5_3_play_permission/batman.txt
/home/alain/5_3_play_permission/Another_Directory

#-- -- permision execute for others and owned by 'alain' user , filtype = file
alain@ubuntuserver22:~$ find /home/alain/5_3_play_permission/ -perm -o=x -user alain -type f
/home/alain/5_3_play_permission/batman.txt

#-- -- same with user 'korin'
alain@ubuntuserver22:~$ find /home/alain/5_3_play_permission/ -perm -o=x -user korin -type f
/home/alain/5_3_play_permission/text3.txt

#-- -- same with user 'ekatia'
alain@ubuntuserver22:~$ find /home/alain/5_3_play_permission/ -perm -o=x -user ekatia -type f
/home/alain/5_3_play_permission/text.txt

#-- -- same with user 'alain' and 'group' 'alain0
alain@ubuntuserver22:~$ find /home/alain/5_3_play_permission/ -perm -o=x -user alain -group alain -type f
/home/alain/5_3_play_permission/batman.txt

#-- -- same with user 'alain' and 'group' 'alain' modified it has been more than 3000 minutes
alain@ubuntuserver22:~$ find /home/alain/5_3_play_permission/ -perm -o=x -user alain -group alain -type f -mmin -3000
/home/alain/5_3_play_permission/batman.txt



#-- 5.4 Special Directories and Files page 416

#-- Create Hard Link : 
# -- Hard links are entries in the filesystem which have different names but point to the same data on disk.

alain@ubuntuserver22:~/5_4_special_dir$ ln target.txt /home/alain/5_4_special_dir/hardlink
# 'ls' and 'i' parameter :  the inode number. See that both the file hardlink and the file target.txt have the same number
alain@ubuntuserver22:~/5_4_special_dir$ ls -i
11272263 hardlink  11272263 target.txt

#-- Fill the file target.txt
alain@ubuntuserver22:~/5_4_special_dir$ find /home/alain/ > target.txt

#--View the content of the hardlink
alain@ubuntuserver22:~/5_4_special_dir$ head -n 3 hardlink
/home/alain/
/home/alain/.profile
/home/alain/.bashrc

#--update the hardlink by overwrite it with less things - we can that the data are syncronized
alain@ubuntuserver22:~/5_4_special_dir$ find /home/alain/ | tail -n 4 > target.txt
alain@ubuntuserver22:~/5_4_special_dir$ cat hardlink
/home/alain/5_4_special_dir/hardlink
/home/alain/hardlink
/home/alain/.bash_logout
/home/alain/.lesshst

#--drop hardlink -- file target.txt still exist with content
alain@ubuntuserver22:~/5_4_special_dir$ rm hardlink
alain@ubuntuserver22:~/5_4_special_dir$ cat target.txt
/home/alain/5_4_special_dir/hardlink
/home/alain/hardlink
/home/alain/.bash_logout
/home/alain/.lesshst

#OR -- if we drop the file and keep the hardlink data have also been replicated

#-- We recreate the hardlink
alain@ubuntuserver22:~/5_4_special_dir$ ln target.txt /home/alain/hardlink2
#-- Put some stuff in it
alain@ubuntuserver22:~/5_4_special_dir$ find /home/alain/ | tail -n 4 > target.txt
#-- view hardlink2 erase file and review hardlink2, data have been replicated
alain@ubuntuserver22:~/5_4_special_dir$ cat hardlink2
/home/alain/5_4_special_dir/target.txt
/home/alain/hardlink
/home/alain/.bash_logout
/home/alain/.lesshst
alain@ubuntuserver22:~/5_4_special_dir$ rm target.txt
alain@ubuntuserver22:~/5_4_special_dir$ cat hardlink2
/home/alain/5_4_special_dir/target.txt
/home/alain/hardlink
/home/alain/.bash_logout
/home/alain/.lesshst




#--Run level
#--Run levels/Init Levels/ Targets…..boot options
#--Init0 = Shutdown = poweroff.target/ runlevel0
#--Init1 = Recovery, Troubleshoot, Single User  = rescue.target
#--Init2 = GUI, no network. (like safe mode of Windows) = multi-user.target
#--Init3 = Multi User, Network, CLI - mult-user.target = multi-user.target
#--Init4 = Unused = multi-user.target
#--Init5 = default, Multi User, Networks, GUI - graphical.target
#--Init6 = restart= reboot.target

root@ubuntuserver22:/home/alain# runlevel
N 5

root@ubuntuserver22:/home/alain# who -r
         run-level 5  2023-12-12 09:06


#--Poweroff system 'init 1|2|3 etc ...' enable to choose option 
init 0 
#--reboot
init 6


#--view my Target
root@ubuntuserver22:/home/alain# systemctl get-default
graphical.target

#--switch Targets
root@ubuntuserver22:/home/alain# systemctl set-default <targetname>

#--List of targets
root@ubuntuserver22:/home/alain# ll -al /etc/systemd/system/ | grep target
drwxr-xr-x  2 root root 4096 Apr 21  2022 cloud-init.target.wants/
drwxr-xr-x  2 root root 4096 Apr 23  2022 emergency.target.wants/
drwxr-xr-x  2 root root 4096 Apr 21  2022 final.target.wants/
drwxr-xr-x  2 root root 4096 Apr 21  2022 getty.target.wants/
drwxr-xr-x  2 root root 4096 Apr 21  2022 graphical.target.wants/
drwxr-xr-x  2 root root 4096 Nov 29 15:54 multi-user.target.wants/
drwxr-xr-x  2 root root 4096 Apr 21  2022 network-online.target.wants/
drwxr-xr-x  2 root root 4096 Apr 21  2022 paths.target.wants/
drwxr-xr-x  2 root root 4096 Apr 23  2022 rescue.target.wants/
drwxr-xr-x  2 root root 4096 Apr 23  2022 sleep.target.wants/
drwxr-xr-x  2 root root 4096 Nov  2 11:13 snapd.mounts.target.wants/
drwxr-xr-x  2 root root 4096 Nov  2 11:13 sockets.target.wants/
drwxr-xr-x  2 root root 4096 Apr 21  2022 sysinit.target.wants/
drwxr-xr-x  2 root root 4096 Nov 29 15:54 timers.target.wants/

#--Return to graphical Targets
root@ubuntuserver22:/home/alain# systemctl isolate graphical.target



